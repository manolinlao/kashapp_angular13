
> fujitsu-mdcs-iot-devices@0.0.1 test8
> rimraf dist-test && tsc --project tsconfig.test.json && set PINO_PRETTY=1&& set PINO_LOG_LEVEL=trace&&node ./dist-test/test/forgetBillsStressTest.js

[09:59:44.692] [32mINFO[39m (Xfs4IotServiceDiscovery): [36mEmpieza el arranque del ServicePublisherDiscovery para encontrar todos los ServicePublisher de la maquina: 10.13.13.10[39m
[09:59:44.906] [34mDEBUG[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::SSL[false]::port[80] connection stablished: ws://10.13.13.10:80/xfs4iot/v1.0/[39m
[09:59:44.991] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mServicePublisher del vendedor: Fujitsu[39m
[09:59:44.991] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36m    0 -> ws://10.13.13.10/xfs4iot/v1.0/CashDispenserXFS3/[39m
[09:59:44.687] [34mDEBUG[39m (MdcsIotDevices): [36m(async) start::Empieza el parseo de las configuraciones[39m
[09:59:44.691] [34mDEBUG[39m (MdcsIotDevices): [36mfound property: MAGSTRIPE=CARD_READER,KAL,SimCardReader[39m
[09:59:44.692] [34mDEBUG[39m (MdcsIotDevices): [36mfound property: MAGSTRIPE_FUJ=CARD_READER,Fujitsu,card-reader[39m
[09:59:44.692] [34mDEBUG[39m (MdcsIotDevices): [36mfound property: CASH=CASH_DISPENSER,Fujitsu,CashDispenserXFS3[39m
[09:59:44.692] [34mDEBUG[39m (MdcsIotDevices): [36m(async) start::Empieza la conexion con los dispositivos[39m
[09:59:46.974] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5846. SSL = false. Error = Error: Error del websocket[39m
[09:59:46.976] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5850. SSL = false. Error = Error: Error del websocket[39m
[09:59:46.977] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5848. SSL = false. Error = Error: Error del websocket[39m
[09:59:46.977] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5851. SSL = false. Error = Error: Error del websocket[39m
[09:59:46.981] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5849. SSL = false. Error = Error: Error del websocket[39m
[09:59:46.982] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5852. SSL = false. Error = Error: Error del websocket[39m
[09:59:46.983] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5853. SSL = false. Error = Error: Error del websocket[39m
[09:59:46.984] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5847. SSL = false. Error = Error: Error del websocket[39m
[09:59:46.985] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5854. SSL = false. Error = Error: Error del websocket[39m
[09:59:47.058] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5856. SSL = false. Error = Error: Error del websocket[39m
[09:59:47.059] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5855. SSL = false. Error = Error: Error del websocket[39m
[09:59:49.356] [90mTRACE[39m (Device): [36m|------------> _init((msg) => this.logger.debug(`callback del init[${device.name}]: ${msg}`))[39m
[09:59:49.352] [33mWARN[39m (MdcsIotDevices): [36mno se encuentra el servicio o vendedor: SimCardReader[39m
[09:59:49.352] [33mWARN[39m (MdcsIotDevices): [36mno se encuentra el servicio o vendedor: card-reader[39m
[09:59:49.352] [32mINFO[39m (MdcsIotDevices): [36mHan acabado de inicializar todos los CARD_READER[39m
[09:59:49.357] [34mDEBUG[39m (MdcsIotDevices): [36mcallback del init[CASH]: starting websocket[39m
[09:59:49.430] [34mDEBUG[39m (MdcsIotDevices): [36mcallback del init[CASH]: websockets configured[39m
[09:59:49.633] [34mDEBUG[39m (MdcsIotDevices): [36mcallback del init[CASH]: capabilitites ok[39m
[09:59:49.753] [34mDEBUG[39m (MdcsIotDevices): [36mcallback del init[CASH]: status ok[39m
[09:59:50.000] [34mDEBUG[39m (MdcsIotDevices): [36mcallback del init[CASH]: CashDispenser initialized[39m
[09:59:50.000] [32mINFO[39m (MdcsIotDevices): [36mHan acabado de inicializar todos los CASH_DISPENSER[39m
[09:59:50.000] [34mDEBUG[39m (MdcsIotDevices): [36m(async) start::Empieza el arranque del de la capa devices (puerto 3100)[39m
[09:59:49.430] [90mTRACE[39m (Device): [36m|------------> getCapabilities()[39m
[09:59:49.430] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"Common.Capabilities","type":"command","requestId":1},"payload":{"timeout":20000}}, (ack) => this.logger.debug(`ack received${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved${JSON.stringify(event)}`))[39m
[09:59:49.633] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"interfaces":[{"name":"common","commands":{"Common.Capabilities":{"versions":["1.0"]},"Common.Status":{"versions":["1.0"]}},"events":{"Common.PowerSaveChangeEvent":{"versions":["1.0"]}},"maximumRequests":0},{"name":"cashDispenser","commands":{"CashDispenser.Denominate":{"versions":["1.0"]},"CashDispenser.Dispense":{"versions":["1.0"]},"CashDispenser.Present":{"versions":["1.0"]},"CashDispenser.GetPresentStatus":{"versions":["1.0"]},"CashDispenser.GetMixTypes":{"versions":["1.0"]}},"maximumRequests":0},{"name":"cashManagement","commands":{"CashManagement.Reset":{"versions":["1.0"]}},"events":{"CashManagement.ItemsTakenEvent":{"versions":["1.0"]},"CashManagement.ItemsPresentedEvent":{"versions":["1.0"]}},"maximumRequests":0},{"name":"storage","commands":{"Storage.GetStorage":{"versions":["1.0"]},"Storage.SetStorage":{"versions":["1.0"]}},"events":{"Storage.StorageChangedEvent":{"versions":["1.0"]}},"maximumRequests":0}],"common":{"serviceVersion":"1.0","deviceInformation":[{"modelName":"G510","revisionNumber":"1.0","modelDescription":"G510 Dispenser","firmware":[{"firmwareName":"ES8000","firmwareVersion":"1.0","hardwareRevision":"1.0"}],"software":[{"softwareName":"XFS4 SP","softwareVersion":"1.0"}]}],"powerSaveControl":false,"antiFraudModule":false},"cashDispenser":{"type":"selfServiceBill","maxDispenseItems":60,"shutterControl":true,"retractAreas":{"retract":false,"transport":false,"stacker":false,"reject":true,"itemCassette":false},"retractTransportActions":{"present":false,"retract":false,"reject":false,"itemCassette":false},"retractStackerActions":{"present":false,"retract":false,"reject":false,"itemCassette":false},"intermediateStacker":true,"itemsTakenSensor":true,"positions":{"left":false,"right":false,"center":false,"top":false,"bottom":false,"front":true,"rear":false},"moveItems":{"fromCashUnit":true,"toCashUnit":false,"toTransport":false,"toStacker":true}},"cashManagement":{"cashBox":false,"exchangeType":{"byHand":true},"itemInfoTypes":{"serialNumber":true,"signature":false,"image":false},"classificationList":false},"completionCode":"success","errorDescription":""},"header":{"name":"Common.Capabilities","requestId":1,"type":"completion"}}[39m
[09:59:49.633] [90mTRACE[39m (Device): [36m<------------| return from getCapabilities: {"payload":{"interfaces":[{"name":"common","commands":{"Common.Capabilities":{"versions":["1.0"]},"Common.Status":{"versions":["1.0"]}},"events":{"Common.PowerSaveChangeEvent":{"versions":["1.0"]}},"maximumRequests":0},{"name":"cashDispenser","commands":{"CashDispenser.Denominate":{"versions":["1.0"]},"CashDispenser.Dispense":{"versions":["1.0"]},"CashDispenser.Present":{"versions":["1.0"]},"CashDispenser.GetPresentStatus":{"versions":["1.0"]},"CashDispenser.GetMixTypes":{"versions":["1.0"]}},"maximumRequests":0},{"name":"cashManagement","commands":{"CashManagement.Reset":{"versions":["1.0"]}},"events":{"CashManagement.ItemsTakenEvent":{"versions":["1.0"]},"CashManagement.ItemsPresentedEvent":{"versions":["1.0"]}},"maximumRequests":0},{"name":"storage","commands":{"Storage.GetStorage":{"versions":["1.0"]},"Storage.SetStorage":{"versions":["1.0"]}},"events":{"Storage.StorageChangedEvent":{"versions":["1.0"]}},"maximumRequests":0}],"common":{"serviceVersion":"1.0","deviceInformation":[{"modelName":"G510","revisionNumber":"1.0","modelDescription":"G510 Dispenser","firmware":[{"firmwareName":"ES8000","firmwareVersion":"1.0","hardwareRevision":"1.0"}],"software":[{"softwareName":"XFS4 SP","softwareVersion":"1.0"}]}],"powerSaveControl":false,"antiFraudModule":false},"cashDispenser":{"type":"selfServiceBill","maxDispenseItems":60,"shutterControl":true,"retractAreas":{"retract":false,"transport":false,"stacker":false,"reject":true,"itemCassette":false},"retractTransportActions":{"present":false,"retract":false,"reject":false,"itemCassette":false},"retractStackerActions":{"present":false,"retract":false,"reject":false,"itemCassette":false},"intermediateStacker":true,"itemsTakenSensor":true,"positions":{"left":false,"right":false,"center":false,"top":false,"bottom":false,"front":true,"rear":false},"moveItems":{"fromCashUnit":true,"toCashUnit":false,"toTransport":false,"toStacker":true}},"cashManagement":{"cashBox":false,"exchangeType":{"byHand":true},"itemInfoTypes":{"serialNumber":true,"signature":false,"image":false},"classificationList":false},"completionCode":"success","errorDescription":""},"header":{"name":"Common.Capabilities","requestId":1,"type":"completion"}}[39m
[09:59:49.633] [90mTRACE[39m (Device): [36m|------------> getStatus()[39m
[09:59:49.634] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"Common.Status","type":"command","requestId":2},"payload":{"timeout":20000}}, (ack) => this.logger.debug(`ack received${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved${JSON.stringify(event)}`))[39m
[09:59:49.753] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"common":{"device":"online","devicePosition":"unknown","powerSaveRecoveryTime":0,"antiFraudModule":"unknown","exchange":"inactive"},"cashDispenser":{"intermediateStacker":"empty","positions":[{"position":"outFront","shutter":"open","positionStatus":"notEmpty","transport":"ok","transportStatus":"empty"}]},"cashManagement":{"safeDoor":"doorNotSupported","dispenser":"attention"},"completionCode":"success","errorDescription":""},"header":{"name":"Common.Status","requestId":2,"type":"completion"}}[39m
[09:59:49.753] [90mTRACE[39m (Device): [36m<------------| return from getStatus: {"payload":{"common":{"device":"online","devicePosition":"unknown","powerSaveRecoveryTime":0,"antiFraudModule":"unknown","exchange":"inactive"},"cashDispenser":{"intermediateStacker":"empty","positions":[{"position":"outFront","shutter":"open","positionStatus":"notEmpty","transport":"ok","transportStatus":"empty"}]},"cashManagement":{"safeDoor":"doorNotSupported","dispenser":"attention"},"completionCode":"success","errorDescription":""},"header":{"name":"Common.Status","requestId":2,"type":"completion"}}[39m
[09:59:49.754] [90mTRACE[39m (CashDispenser): [36m|------------> init((msg) => this.logger.debug(`callback del init[${device.name}]: ${msg}`), {"payload":{"interfaces":[{"name":"common","commands":{"Common.Capabilities":{"versions":["1.0"]},"Common.Status":{"versions":["1.0"]}},"events":{"Common.PowerSaveChangeEvent":{"versions":["1.0"]}},"maximumRequests":0},{"name":"cashDispenser","commands":{"CashDispenser.Denominate":{"versions":["1.0"]},"CashDispenser.Dispense":{"versions":["1.0"]},"CashDispenser.Present":{"versions":["1.0"]},"CashDispenser.GetPresentStatus":{"versions":["1.0"]},"CashDispenser.GetMixTypes":{"versions":["1.0"]}},"maximumRequests":0},{"name":"cashManagement","commands":{"CashManagement.Reset":{"versions":["1.0"]}},"events":{"CashManagement.ItemsTakenEvent":{"versions":["1.0"]},"CashManagement.ItemsPresentedEvent":{"versions":["1.0"]}},"maximumRequests":0},{"name":"storage","commands":{"Storage.GetStorage":{"versions":["1.0"]},"Storage.SetStorage":{"versions":["1.0"]}},"events":{"Storage.StorageChangedEvent":{"versions":["1.0"]}},"maximumRequests":0}],"common":{"serviceVersion":"1.0","deviceInformation":[{"modelName":"G510","revisionNumber":"1.0","modelDescription":"G510 Dispenser","firmware":[{"firmwareName":"ES8000","firmwareVersion":"1.0","hardwareRevision":"1.0"}],"software":[{"softwareName":"XFS4 SP","softwareVersion":"1.0"}]}],"powerSaveControl":false,"antiFraudModule":false},"cashDispenser":{"type":"selfServiceBill","maxDispenseItems":60,"shutterControl":true,"retractAreas":{"retract":false,"transport":false,"stacker":false,"reject":true,"itemCassette":false},"retractTransportActions":{"present":false,"retract":false,"reject":false,"itemCassette":false},"retractStackerActions":{"present":false,"retract":false,"reject":false,"itemCassette":false},"intermediateStacker":true,"itemsTakenSensor":true,"positions":{"left":false,"right":false,"center":false,"top":false,"bottom":false,"front":true,"rear":false},"moveItems":{"fromCashUnit":true,"toCashUnit":false,"toTransport":false,"toStacker":true}},"cashManagement":{"cashBox":false,"exchangeType":{"byHand":true},"itemInfoTypes":{"serialNumber":true,"signature":false,"image":false},"classificationList":false},"completionCode":"success","errorDescription":""},"header":{"name":"Common.Capabilities","requestId":1,"type":"completion"}}, {"payload":{"common":{"device":"online","devicePosition":"unknown","powerSaveRecoveryTime":0,"antiFraudModule":"unknown","exchange":"inactive"},"cashDispenser":{"intermediateStacker":"empty","positions":[{"position":"outFront","shutter":"open","positionStatus":"notEmpty","transport":"ok","transportStatus":"empty"}]},"cashManagement":{"safeDoor":"doorNotSupported","dispenser":"attention"},"completionCode":"success","errorDescription":""},"header":{"name":"Common.Status","requestId":2,"type":"completion"}})[39m
[09:59:49.754] [90mTRACE[39m (CashDispenser): [36m|------------> getStorageInfo()[39m
[09:59:49.755] [90mTRACE[39m (Device): [36m|------------> send({"requestId":3,"timeout":60000,"header":{"name":"Storage.GetStorage","requestId":3,"type":"command"},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[09:59:49.880] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR50"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR20"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit3":{"id":"D0003","positionName":"CASSETTE3","capacity":2000,"status":"missing","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit4":{"id":"D0004","positionName":"CASSETTE4","capacity":2000,"status":"missing","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}},"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":128,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"completionCode":"success"},"header":{"name":"Storage.GetStorage","requestId":3,"type":"completion"}}[39m
[09:59:49.881] [90mTRACE[39m (CashDispenser): [36mupdateUnits updateUnits({"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR50"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR20"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit3":{"id":"D0003","positionName":"CASSETTE3","capacity":2000,"status":"missing","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit4":{"id":"D0004","positionName":"CASSETTE4","capacity":2000,"status":"missing","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}},"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":128,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}})[39m
[09:59:49.882] [90mTRACE[39m (CashDispenser): [36mupdateUnits return from updateUnits: undefined[39m
[09:59:49.882] [90mTRACE[39m (CashDispenser): [36m<------------| return from getStorageInfo: undefined[39m
[09:59:49.883] [90mTRACE[39m (CashDispenser): [36m|------------> getMixTypes()[39m
[09:59:49.883] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.GetMixTypes","type":"command","requestId":4},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[09:59:50.000] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"mixes":{"mix1":{"type":"algorithm","algorithm":"minimumBills","name":"Minimum Number Of Bills"},"mix2":{"type":"algorithm","algorithm":"equalEmptying","name":"Equal emptying of cash units"}},"completionCode":"success"},"header":{"name":"CashDispenser.GetMixTypes","requestId":4,"type":"completion"}}[39m
[09:59:50.000] [90mTRACE[39m (CashDispenser): [36m<------------| return from getMixTypes: undefined[39m
[09:59:50.000] [90mTRACE[39m (CashDispenser): [36m<------------| return from init: undefined[39m
[09:59:50.000] [90mTRACE[39m (Device): [36m<------------| return from _init: undefined[39m
[09:59:49.302] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 443. SSL = true. Error = Error: Error del websocket[39m
[09:59:49.321] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5850. SSL = true. Error = Error: Error del websocket[39m
[09:59:49.322] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5846. SSL = true. Error = Error: Error del websocket[39m
[09:59:49.322] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5848. SSL = true. Error = Error: Error del websocket[39m
[09:59:49.330] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5847. SSL = true. Error = Error: Error del websocket[39m
[09:59:49.331] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5851. SSL = true. Error = Error: Error del websocket[39m
[09:59:49.331] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5855. SSL = true. Error = Error: Error del websocket[39m
[09:59:49.332] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5854. SSL = true. Error = Error: Error del websocket[39m
[09:59:49.334] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5849. SSL = true. Error = Error: Error del websocket[39m
[09:59:49.334] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5852. SSL = true. Error = Error: Error del websocket[39m
[09:59:49.351] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5853. SSL = true. Error = Error: Error del websocket[39m
[09:59:49.351] [90mTRACE[39m (Xfs4IotServiceDiscovery): [36mdiscoverServices::Error connection port 5856. SSL = true. Error = Error: Error del websocket[39m
[09:59:49.351] [32mINFO[39m (Xfs4IotServiceDiscovery): [36mSe han encontrado: 1 service publishers usando WS.[39m
[09:59:49.351] [32mINFO[39m (Xfs4IotServiceDiscovery): [36mSe han encontrado: 0 service publishers usando WSS.[39m
[FBST] Empieza test forgetBillsStressTest
[FBST] result: {"device":"CASH_DISPENSER","type":"AvailableBills","maxBillsDispensables":60,"bills":[{"denom":10,"numBills":400},{"denom":20,"numBills":300},{"denom":50,"numBills":500}]}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[09:59:50.568] [34mDEBUG[39m (MdcsIotDevices): [36mcreateConnection openned connection on: wss://signaling.demoreta-arevalo.com:443[39m
[09:59:50.569] [32mINFO[39m (MdcsIotDevices): [36mHan acabado de inicializar la conectividad con signaling server[39m
[09:59:50.586] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[09:59:50.586] [34mDEBUG[39m (MdcsIotDevices): [36mSuccessfully connected user on: CASH[39m
[09:59:50.589] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"type":"AvailableBills","device":"CASH_DISPENSER"}[39m
[09:59:50.593] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[09:59:50.594] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR50"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR20"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":128,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[09:59:50.595] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR50"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR20"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":128,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[09:59:50.595] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[09:59:50.596] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[09:59:50.596] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR50"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[09:59:50.596] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[09:59:50.596] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR50"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[09:59:50.596] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR50"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[09:59:50.596] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[09:59:50.596] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[09:59:50.597] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[09:59:50.597] [90mTRACE[39m (Function): [36m return from getFitFrom: 119[39m
[09:59:50.597] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[09:59:50.597] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.597] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[09:59:50.597] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.597] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[09:59:50.597] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.597] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[09:59:50.597] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.597] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[09:59:50.597] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.597] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[09:59:50.597] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m return from getSumCashOut: 119[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 381[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR50"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR50"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR50"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m return from getFitFrom: 119[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.598] [90mTRACE[39m (Function): [36m return from getSumCashOut: 119[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 381[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR20"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR20"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR20"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m return from getFitFrom: 119[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.599] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getSumCashOut: 119[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 181[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR20"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR20"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR20"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getFitFrom: 119[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getSumCashOut: 119[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 181[39m
[09:59:50.600] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[09:59:50.601] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[09:59:50.601] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":5},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[09:59:49.520] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[09:59:49.561] [34mDEBUG[39m (CashDispenser): [36mack received{"payload":{"status":"ok"},"header":{"name":"Common.Capabilities","requestId":1,"type":"acknowledge"}}[39m
[09:59:49.632] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[09:59:49.689] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[09:59:49.689] [34mDEBUG[39m (CashDispenser): [36mack received{"payload":{"status":"ok"},"header":{"name":"Common.Status","requestId":2,"type":"acknowledge"}}[39m
[09:59:49.753] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[09:59:49.815] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[09:59:49.816] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"Storage.GetStorage","requestId":3,"type":"acknowledge"}}[39m
[09:59:49.880] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[09:59:49.882] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR50"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[09:59:49.882] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR20"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[09:59:49.882] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit3]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[09:59:49.882] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit4]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[09:59:49.882] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":128,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[09:59:49.882] [90mTRACE[39m (CashDispenser): [36mcurrent state {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR50"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR20"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":128,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}[39m
[09:59:49.937] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[09:59:49.938] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.GetMixTypes","requestId":4,"type":"acknowledge"}}[39m
[09:59:50.000] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[09:59:50.000] [32mINFO[39m (CashDispenser): [36mHa terminado de inicializar[39m
[09:59:50.591] [34mDEBUG[39m (CashDispenser): [36mfor unit[unit1] initial box[EUR50]: is a StorageDispenserBox[39m
[09:59:50.591] [34mDEBUG[39m (CashDispenser): [36mfor unit[unit2] initial box[EUR20]: is a StorageDispenserBox[39m
[09:59:50.591] [34mDEBUG[39m (CashDispenser): [36mfor unit[unit3] initial box[EUR10]: is a StorageDispenserBox[39m
[09:59:50.836] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[09:59:50.836] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":5,"type":"acknowledge"}}[39m
[09:59:50.569] [34mDEBUG[39m (TEST): [36mStarted mdcsIotDevices[39m
[09:59:50.588] [34mDEBUG[39m (TEST): [36mLa conexion ha sido establecia, podemos empezar a mandar comandos al CASH[39m
[09:59:50.592] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"AvailableBills\",\"maxBillsDispensables\":60,\"bills\":[{\"denom\":10,\"numBills\":400},{\"denom\":20,\"numBills\":300},{\"denom\":50,\"numBills\":500}]}"[39m
[09:59:49.360] [34mDEBUG[39m (Xfs4iotConnectorService): [36mSe llama al connect![39m
[09:59:49.360] [34mDEBUG[39m (Xfs4iotConnectorService): [36mSe llama al create![39m
[09:59:49.430] [34mDEBUG[39m (Xfs4iotConnectorService): [36mXfs4iotConnectorService openned connection on: ws://10.13.13.10/xfs4iot/v1.0/CashDispenserXFS3/[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":380,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":180,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[09:59:55.829] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[09:59:55.830] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[09:59:55.927] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[09:59:55.826] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[09:59:55.827] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[09:59:55.828] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[09:59:55.828] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[09:59:55.829] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[09:59:55.829] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[09:59:55.829] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[09:59:55.829] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[09:59:55.829] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":380,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":180,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[09:59:55.831] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[09:59:55.925] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":5,"type":"completion"}}[39m
[09:59:55.972] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":6},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[09:59:55.826] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[09:59:55.826] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[09:59:55.827] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[09:59:55.827] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[09:59:55.827] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":119,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[09:59:55.924] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[09:59:56.097] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[09:59:56.158] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":6,"type":"acknowledge"}}[39m
[09:59:55.835] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":380,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":180,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[09:59:55.926] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":380,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":180,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 1 -------------------------------
[10:00:01.151] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:00:01.151] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:00:01.095] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:00:01.095] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:00:01.148] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:00:01.149] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:00:01.149] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:00:01.149] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:01.150] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:00:01.150] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:01.150] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:00:01.150] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:01.151] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":380,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":180,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:00:01.151] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:00:01.303] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":6,"type":"completion"}}[39m
[10:00:01.095] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:00:01.095] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:00:01.095] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:00:01.095] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:00:01.148] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:00:01.148] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:00:01.148] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:00:01.149] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:00:01.149] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:00:01.240] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:00:01.303] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:00:01.162] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":380,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":180,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:00:01.304] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:00:01.305] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[CD] en retract
[CD] en retractFunction
[10:00:16.319] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":7},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:00:16.412] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:00:16.459] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":7,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 1 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:00:17.319] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":128,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:00:17.320] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":128,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:00:17.320] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:00:17.320] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:00:17.320] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:00:17.320] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:00:17.320] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:00:17.320] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:00:17.320] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m return from getFitFrom: 120[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m return from getSumCashOut: 120[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 380[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m return from getFitFrom: 120[39m
[10:00:17.321] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getSumCashOut: 120[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 380[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 120[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:00:17.323] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.328] [90mTRACE[39m (Function): [36m return from getSumCashOut: 120[39m
[10:00:17.328] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 180[39m
[10:00:17.328] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:00:17.328] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:00:17.328] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:00:17.328] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:00:17.328] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m return from getFitFrom: 120[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m return from getSumCashOut: 120[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 180[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:00:17.329] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:00:17.329] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":8},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:00:17.589] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:00:17.643] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":8,"type":"acknowledge"}}[39m
[10:00:17.319] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":380,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":180,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:00:38.215] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":380,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":180,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:00:38.213] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:00:38.213] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:00:38.211] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":129,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:00:38.212] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:00:38.212] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:00:38.212] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:38.212] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:00:38.212] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:38.212] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:00:38.212] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:38.213] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":380,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":180,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:00:38.214] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:00:38.351] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":7,"type":"completion"}}[39m
[10:00:38.210] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:00:38.210] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:00:38.211] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":129,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:00:38.211] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":129,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:00:38.288] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:00:38.351] [33mWARN[39m (CashDispenser): [36mwaitCompletionMessage::Cuidado, ha llegado complete tarde.Estamos tratando el complete con requestId: 8 y el lastCompleteRequestId es: 7[39m
[10:00:38.351] [33mWARN[39m (CashDispenser): [36mlastCompletionMsg: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":7,"type":"completion"}}[39m
[10:00:38.352] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":379,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":179,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:00:43.316] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":379,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":179,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:00:43.485] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:00:43.313] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:00:43.313] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:00:43.490] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:00:43.310] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:00:43.311] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:00:43.311] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:00:43.311] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:43.312] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:00:43.312] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:43.312] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:00:43.312] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:43.312] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":379,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":179,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:00:43.313] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:00:43.483] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":8,"type":"completion"}}[39m
[10:00:43.493] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":9},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:00:43.310] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:00:43.310] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:00:43.310] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:00:43.311] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:00:43.311] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":120,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:00:43.416] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:00:43.620] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:00:43.620] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":9,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":379,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":179,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 2 -------------------------------
[10:00:49.140] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:00:49.140] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:00:49.201] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:00:49.201] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:00:49.202] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:00:49.202] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:49.202] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:00:49.202] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:49.202] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:00:49.202] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:00:49.202] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":379,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":179,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:00:49.202] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:00:49.281] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":9,"type":"completion"}}[39m
[10:00:49.140] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:00:49.140] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:00:49.140] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:00:49.140] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:00:49.201] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:00:49.201] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:00:49.201] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:00:49.201] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:00:49.201] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:00:49.281] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:00:49.281] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:00:49.205] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":379,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":179,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:00:49.282] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:00:49.283] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:00:49.202] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:00:49.202] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[CD] en retract
[CD] en retractFunction
[10:01:04.284] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":10},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:01:04.374] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:01:04.427] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":10,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 2 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:01:05.284] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":129,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:01:05.285] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":129,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:01:05.285] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:01:05.285] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:01:05.285] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:01:05.285] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:01:05.285] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:01:05.285] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:01:05.285] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:05.285] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:01:05.285] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m return from getFitFrom: 121[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m return from getSumCashOut: 121[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 379[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:01:05.286] [90mTRACE[39m (Function): [36m return from getFitFrom: 121[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m return from getSumCashOut: 121[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 379[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m return from getFitFrom: 121[39m
[10:01:05.287] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getSumCashOut: 121[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 179[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getFitFrom: 121[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getSumCashOut: 121[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 179[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:01:05.288] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:01:05.289] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":11},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:01:05.354] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:01:05.354] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":11,"type":"acknowledge"}}[39m
[10:01:05.284] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":379,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":179,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:01:26.275] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:01:26.275] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:01:26.274] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":130,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:01:26.274] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:01:26.275] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:01:26.275] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:26.275] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:01:26.275] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:26.275] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:01:26.275] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:26.275] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":379,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":179,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:01:26.275] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:01:26.455] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":10,"type":"completion"}}[39m
[10:01:26.274] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:01:26.274] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:01:26.274] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":130,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:01:26.274] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":130,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:01:26.384] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:01:26.384] [33mWARN[39m (CashDispenser): [36mwaitCompletionMessage::Cuidado, ha llegado complete tarde.Estamos tratando el complete con requestId: 11 y el lastCompleteRequestId es: 10[39m
[10:01:26.384] [33mWARN[39m (CashDispenser): [36mlastCompletionMsg: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":10,"type":"completion"}}[39m
[10:01:26.455] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[10:01:26.288] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":379,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":179,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":378,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":178,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:01:31.368] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":378,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":178,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:01:31.427] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:01:31.365] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:01:31.366] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:01:31.366] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:01:31.366] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:31.366] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:01:31.366] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:31.366] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:01:31.366] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:31.367] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":378,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":178,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:01:31.367] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:01:31.427] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":11,"type":"completion"}}[39m
[10:01:31.430] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":12},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:01:31.365] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:01:31.365] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:01:31.365] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:01:31.366] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:01:31.366] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":121,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:01:31.427] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:01:31.489] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:01:31.489] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":12,"type":"acknowledge"}}[39m
[10:01:31.367] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:01:31.367] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:01:31.429] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":378,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":178,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 3 -------------------------------
[10:01:36.897] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:01:36.897] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:01:36.959] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:01:36.960] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:01:36.960] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:01:36.960] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:36.960] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:01:36.960] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:36.960] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:01:36.960] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:36.963] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":378,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":178,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:01:36.963] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:01:37.029] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":12,"type":"completion"}}[39m
[10:01:36.897] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:01:36.897] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:01:36.897] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:01:36.897] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:01:36.959] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:01:36.959] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:01:36.959] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:01:36.959] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:01:36.959] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:01:37.029] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:01:37.030] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:01:36.963] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:01:36.963] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:01:36.965] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":378,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":178,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:01:37.030] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:01:37.031] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[CD] en retract
[CD] en retractFunction
[10:01:52.135] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:01:52.181] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":13,"type":"acknowledge"}}[39m
[10:01:52.042] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":13},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
-----------------------Starting next iteration 3 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:01:53.043] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":130,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:01:53.043] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":130,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:01:53.043] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:01:53.043] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:01:53.043] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:01:53.043] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:01:53.043] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m return from getFitFrom: 122[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m return from getSumCashOut: 122[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 378[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:01:53.044] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m return from getFitFrom: 122[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m return from getSumCashOut: 122[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 378[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:01:53.045] [90mTRACE[39m (Function): [36m return from getFitFrom: 122[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getSumCashOut: 122[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 178[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getFitFrom: 122[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getSumCashOut: 122[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 178[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:01:53.046] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:01:53.046] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":14},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:01:53.227] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:01:53.227] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":14,"type":"acknowledge"}}[39m
[10:01:53.043] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":378,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":178,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:02:13.865] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":378,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":178,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
función de success
función de final
[10:02:13.863] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:02:13.863] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:02:13.862] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":131,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:02:13.863] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:02:13.863] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:02:13.863] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:02:13.863] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:02:13.863] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:02:13.863] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:02:13.863] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:02:13.863] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":378,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":178,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:02:13.863] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:02:14.004] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":13,"type":"completion"}}[39m
[10:02:13.862] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:02:13.862] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:02:13.862] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":131,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:02:13.862] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":131,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:02:13.945] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:02:13.945] [33mWARN[39m (CashDispenser): [36mwaitCompletionMessage::Cuidado, ha llegado complete tarde.Estamos tratando el complete con requestId: 14 y el lastCompleteRequestId es: 13[39m
[10:02:13.945] [33mWARN[39m (CashDispenser): [36mlastCompletionMsg: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":13,"type":"completion"}}[39m
[10:02:14.005] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":377,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":177,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:02:18.980] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:02:18.980] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:02:18.980] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:02:18.980] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:02:18.980] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:02:19.042] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:02:19.104] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:02:19.104] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":15,"type":"acknowledge"}}[39m
[10:02:18.982] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":377,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":177,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:02:19.043] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:02:18.981] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:02:18.981] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:02:19.044] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:02:18.980] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:02:18.980] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:02:18.980] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:02:18.980] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:02:18.980] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":122,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:02:18.980] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:02:18.981] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:02:18.981] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:02:18.981] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":377,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":177,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:02:18.981] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:02:19.042] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":14,"type":"completion"}}[39m
[10:02:19.045] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":15},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":377,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":177,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 4 -------------------------------
[10:02:23.982] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:02:23.982] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:02:23.983] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:02:23.983] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:02:24.034] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:02:24.034] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:02:24.035] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:02:24.035] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:02:24.035] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:02:24.096] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:02:24.096] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:02:24.037] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":377,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":177,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:02:24.096] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:02:24.097] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:02:24.035] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:02:24.035] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:02:23.982] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:02:23.983] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:02:24.034] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:02:24.035] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:02:24.035] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:02:24.035] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:02:24.035] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:02:24.035] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:02:24.035] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:02:24.035] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:02:24.035] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":377,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":177,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:02:24.036] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:02:24.096] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":15,"type":"completion"}}[39m
[CD] en retract
[CD] en retractFunction
[10:02:39.097] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":16},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:02:39.290] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:02:39.290] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":16,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 4 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:02:40.204] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:02:40.235] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":17,"type":"acknowledge"}}[39m
[10:02:40.109] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":131,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:02:40.109] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":131,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:02:40.109] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:02:40.109] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:02:40.109] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:02:40.109] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:02:40.109] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:02:40.109] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:02:40.109] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getFitFrom: 123[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getSumCashOut: 123[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 377[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getFitFrom: 123[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getSumCashOut: 123[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 377[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:02:40.110] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m return from getFitFrom: 123[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m return from getSumCashOut: 123[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 177[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:02:40.111] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m return from getFitFrom: 123[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m return from getSumCashOut: 123[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 177[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:02:40.112] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:02:40.112] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":17},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:02:40.108] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":377,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":177,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:03:00.835] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":377,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":177,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:03:00.833] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:03:00.834] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:03:00.832] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:03:00.832] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:03:00.832] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":132,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:03:00.833] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":132,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:03:00.894] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:03:00.895] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[10:03:00.832] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":132,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:03:00.833] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:03:00.833] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:00.833] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:00.833] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:00.833] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:00.833] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:00.833] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:00.833] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":377,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":177,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:03:00.834] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:03:00.895] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":16,"type":"completion"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":376,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":176,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:03:05.988] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:03:05.988] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:03:05.988] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:03:05.988] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:03:05.988] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:03:05.988] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:03:05.988] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:03:05.988] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:05.988] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:05.988] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":123,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:05.988] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:05.988] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:05.988] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:05.989] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":376,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":176,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:03:05.989] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:03:06.062] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":17,"type":"completion"}}[39m
[10:03:06.066] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":18},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:03:06.062] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:03:06.115] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:03:06.150] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":18,"type":"acknowledge"}}[39m
[10:03:05.990] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":376,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":176,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:03:06.063] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:03:05.989] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:03:05.989] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:03:06.064] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":376,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":176,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:03:11.088] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:03:11.088] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:03:11.145] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:03:11.145] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:03:11.145] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:11.145] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:11.145] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:11.145] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:11.145] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:11.145] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:11.145] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":376,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":176,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:03:11.146] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 5 -------------------------------
[10:03:11.268] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":18,"type":"completion"}}[39m
[10:03:11.147] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":376,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":176,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:03:11.268] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:03:11.269] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:03:11.088] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:03:11.088] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:03:11.088] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:03:11.088] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:03:11.144] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:03:11.144] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:03:11.145] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:03:11.145] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:03:11.145] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:03:11.213] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:03:11.268] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:03:11.145] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:03:11.145] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[CD] en retract
[CD] en retractFunction
[10:03:26.276] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":19},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:03:26.362] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:03:26.419] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":19,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 5 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:03:27.275] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":132,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:03:27.275] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":132,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:03:27.275] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:03:27.275] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:03:27.275] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:03:27.275] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:03:27.275] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:03:27.275] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:03:27.275] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:27.275] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:03:27.275] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:03:27.275] [90mTRACE[39m (Function): [36m return from getFitFrom: 124[39m
[10:03:27.275] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:03:27.275] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.275] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getSumCashOut: 124[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 376[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getFitFrom: 124[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getSumCashOut: 124[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 376[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:03:27.276] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m return from getFitFrom: 124[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m return from getSumCashOut: 124[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 176[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:03:27.277] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m return from getFitFrom: 124[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m return from getSumCashOut: 124[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 176[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:03:27.278] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:03:27.279] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":20},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:03:27.336] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:03:27.400] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":20,"type":"acknowledge"}}[39m
[10:03:27.274] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":376,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":176,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:03:48.137] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":133,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:03:48.138] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:03:48.138] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:48.138] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:48.138] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:48.138] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:48.138] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:48.138] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:48.138] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":376,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":176,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:03:48.139] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:03:48.137] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:03:48.137] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:03:48.137] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":133,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:03:48.138] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":133,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:03:48.200] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
función de success
función de final
[10:03:48.264] [33mWARN[39m (CashDispenser): [36mwaitCompletionMessage::Cuidado, ha llegado complete tarde.Estamos tratando el complete con requestId: 20 y el lastCompleteRequestId es: 19[39m
[10:03:48.264] [33mWARN[39m (CashDispenser): [36mlastCompletionMsg: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":19,"type":"completion"}}[39m
[10:03:48.264] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[10:03:48.264] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":19,"type":"completion"}}[39m
[10:03:48.138] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:03:48.138] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:03:48.143] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":376,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":176,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":375,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":175,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:03:53.270] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:03:53.270] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:03:53.270] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:03:53.270] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:03:53.270] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:03:53.336] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:03:53.521] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:03:53.521] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":21,"type":"acknowledge"}}[39m
[10:03:53.271] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:03:53.271] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:03:53.400] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:03:53.270] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:03:53.270] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:03:53.270] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:53.270] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:53.270] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":124,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:53.270] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:53.271] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:53.271] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:53.271] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":375,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":175,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:03:53.271] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:03:53.397] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":20,"type":"completion"}}[39m
[10:03:53.401] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":21},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:03:53.272] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":375,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":175,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:03:53.398] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":375,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":175,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 6 -------------------------------
[10:03:59.099] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":375,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":175,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:03:59.184] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:03:59.185] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:03:59.033] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:03:59.034] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:03:59.096] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:03:59.096] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:03:59.096] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:59.096] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:59.096] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:59.097] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:59.097] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:03:59.097] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:03:59.097] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":375,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":175,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:03:59.097] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:03:59.183] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":21,"type":"completion"}}[39m
[10:03:59.033] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:03:59.033] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:03:59.034] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:03:59.034] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:03:59.096] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:03:59.096] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:03:59.096] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:03:59.096] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:03:59.096] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:03:59.183] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:03:59.184] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:03:59.097] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:03:59.097] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[CD] en retract
[CD] en retractFunction
[10:04:14.311] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:04:14.311] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":22,"type":"acknowledge"}}[39m
[10:04:14.185] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":22},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
-----------------------Starting next iteration 6 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:04:15.192] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":133,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:04:15.192] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":133,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:04:15.193] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:04:15.193] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:04:15.193] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:04:15.193] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:04:15.193] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:04:15.193] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:04:15.193] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:04:15.193] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:04:15.193] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m return from getFitFrom: 125[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m return from getSumCashOut: 125[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 375[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:04:15.194] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m return from getFitFrom: 125[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m return from getSumCashOut: 125[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 375[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m return from getFitFrom: 125[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:04:15.195] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m return from getSumCashOut: 125[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 175[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:04:15.196] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m return from getFitFrom: 125[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m return from getSumCashOut: 125[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 175[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:04:15.197] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:04:15.197] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":23},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:04:15.298] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:04:15.413] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":23,"type":"acknowledge"}}[39m
[10:04:15.192] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":375,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":175,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:04:36.114] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:04:36.114] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:04:36.113] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":134,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:04:36.113] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:04:36.113] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:04:36.113] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:04:36.113] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:04:36.113] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:04:36.114] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:04:36.114] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:04:36.114] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":375,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":175,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:04:36.114] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:04:36.183] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":22,"type":"completion"}}[39m
[10:04:36.115] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":375,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":175,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:04:36.113] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:04:36.113] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:04:36.113] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":134,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:04:36.113] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":134,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:04:36.183] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:04:36.184] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":374,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":174,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:04:41.302] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:04:41.302] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:04:41.429] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:04:41.301] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:04:41.301] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:04:41.301] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:04:41.301] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:04:41.301] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:04:41.301] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:04:41.302] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:04:41.302] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:04:41.302] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":374,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":174,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:04:41.302] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:04:41.427] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":23,"type":"completion"}}[39m
[10:04:41.430] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":24},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:04:41.304] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":374,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":174,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:04:41.428] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:04:41.301] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:04:41.301] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:04:41.301] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:04:41.301] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:04:41.301] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":125,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:04:41.367] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:04:41.549] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:04:41.549] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":24,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":374,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":174,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 7 -------------------------------
[10:04:46.848] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:04:46.848] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:04:46.910] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:04:46.910] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:04:46.910] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:04:46.911] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:04:46.911] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:04:46.911] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:04:46.911] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:04:46.911] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:04:46.911] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":374,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":174,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:04:46.911] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:04:46.972] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":24,"type":"completion"}}[39m
[10:04:46.912] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":374,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":174,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:04:46.973] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:04:46.973] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:04:46.848] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:04:46.848] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:04:46.848] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:04:46.848] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:04:46.910] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:04:46.910] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:04:46.910] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:04:46.910] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:04:46.910] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:04:46.972] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:04:46.973] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:04:46.911] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:04:46.911] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[CD] en retract
[CD] en retractFunction
[10:05:01.984] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":25},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:05:02.062] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:05:02.126] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":25,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 7 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:05:03.086] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:05:02.975] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[10:05:03.148] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":26,"type":"acknowledge"}}[39m
[10:05:02.975] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":134,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:05:02.976] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":134,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:05:02.976] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:05:02.976] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:05:02.976] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:05:02.976] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:05:02.976] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:05:02.976] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:05:02.976] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getFitFrom: 126[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getSumCashOut: 126[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 374[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getFitFrom: 126[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.977] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getSumCashOut: 126[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 374[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getFitFrom: 126[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getSumCashOut: 126[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 174[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:05:02.978] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m return from getFitFrom: 126[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m return from getSumCashOut: 126[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 174[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:05:02.979] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:05:02.979] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":26},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":374,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":174,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:05:23.912] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:05:23.912] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:05:23.911] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:05:23.911] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:05:23.911] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":135,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:05:23.912] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":135,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:05:23.976] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:05:24.030] [33mWARN[39m (CashDispenser): [36mwaitCompletionMessage::Cuidado, ha llegado complete tarde.Estamos tratando el complete con requestId: 26 y el lastCompleteRequestId es: 25[39m
[10:05:24.030] [33mWARN[39m (CashDispenser): [36mlastCompletionMsg: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":25,"type":"completion"}}[39m
[10:05:24.030] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[10:05:23.914] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":374,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":174,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:05:23.911] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":135,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:05:23.912] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:05:23.912] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:05:23.912] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:23.912] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:05:23.912] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:23.912] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:05:23.912] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:23.912] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":374,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":174,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:05:23.913] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:05:24.030] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":25,"type":"completion"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":373,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":173,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:05:29.020] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:05:29.020] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:05:29.150] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:05:29.019] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:05:29.019] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:05:29.020] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:05:29.020] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:05:29.020] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:05:29.084] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:05:29.269] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:05:29.269] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":27,"type":"acknowledge"}}[39m
[10:05:29.021] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":373,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":173,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:05:29.145] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:05:29.019] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:05:29.020] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:05:29.020] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:05:29.020] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:29.020] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":126,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:05:29.020] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:29.020] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:05:29.020] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:29.020] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":373,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":173,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:05:29.020] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:05:29.144] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":26,"type":"completion"}}[39m
[10:05:29.153] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":27},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":373,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":173,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 8 -------------------------------
[10:05:34.923] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:05:34.923] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:05:34.860] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:05:34.860] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:05:34.860] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:05:34.860] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:05:34.922] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:05:34.922] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:05:34.923] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:05:34.923] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:05:34.923] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:05:35.000] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:05:35.000] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:05:34.924] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":373,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":173,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:05:35.001] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:05:35.002] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:05:34.860] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:05:34.860] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:05:34.922] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:05:34.923] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:05:34.923] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:05:34.923] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:34.923] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:05:34.923] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:34.923] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:05:34.923] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:34.923] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":373,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":173,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:05:34.923] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:05:35.000] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":27,"type":"completion"}}[39m
[CD] en retract
[CD] en retractFunction
[10:05:50.163] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:05:50.164] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":28,"type":"acknowledge"}}[39m
[10:05:50.007] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":28},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
-----------------------Starting next iteration 8 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:05:51.010] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":135,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":135,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m return from getFitFrom: 127[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m return from getSumCashOut: 127[39m
[10:05:51.011] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 373[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m return from getFitFrom: 127[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m return from getSumCashOut: 127[39m
[10:05:51.012] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 373[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m return from getFitFrom: 127[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m return from getSumCashOut: 127[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 173[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:05:51.013] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m return from getFitFrom: 127[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m return from getSumCashOut: 127[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 173[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:05:51.014] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:05:51.014] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":29},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:05:51.010] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[10:05:51.105] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:05:51.134] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":29,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":373,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":173,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:06:11.932] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":136,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:06:11.932] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:06:11.932] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:06:11.932] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:11.932] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:06:11.932] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:11.933] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:06:11.933] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:11.933] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":373,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":173,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:06:11.933] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:06:12.031] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":28,"type":"completion"}}[39m
[10:06:11.933] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:06:11.933] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:06:11.934] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":373,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":173,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:06:11.932] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:06:11.932] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:06:11.932] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":136,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:06:11.932] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":136,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:06:12.031] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:06:12.032] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":372,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":172,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:06:17.045] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:06:17.045] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:06:17.045] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:06:17.045] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:17.045] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:06:17.045] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:17.046] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:06:17.046] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:17.046] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":372,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":172,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:06:17.046] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:06:17.170] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":29,"type":"completion"}}[39m
[10:06:17.172] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":30},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:06:17.046] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:06:17.046] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:06:17.171] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:06:17.047] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":372,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":172,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:06:17.170] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:06:17.045] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:06:17.045] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:06:17.045] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:06:17.045] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:06:17.045] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":127,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:06:17.107] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:06:17.245] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:06:17.245] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":30,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":372,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":172,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 9 -------------------------------
[10:06:22.622] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:06:22.623] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:06:22.684] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:06:22.684] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:06:22.684] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:06:22.684] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:22.685] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:06:22.685] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:22.685] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:06:22.685] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:22.685] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":372,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":172,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:06:22.685] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:06:22.752] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":30,"type":"completion"}}[39m
[10:06:22.685] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:06:22.685] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:06:22.686] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":372,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":172,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:06:22.752] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:06:22.753] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:06:22.622] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:06:22.622] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:06:22.623] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:06:22.623] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:06:22.684] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:06:22.684] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:06:22.684] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:06:22.684] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:06:22.684] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:06:22.752] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:06:22.752] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[CD] en retract
[CD] en retractFunction
[10:06:37.765] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":31},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:06:37.839] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:06:37.916] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":31,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 9 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:06:38.771] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":136,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:06:38.772] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":136,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:06:38.772] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:06:38.772] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:06:38.772] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:06:38.772] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:06:38.772] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:06:38.772] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:06:38.772] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m return from getFitFrom: 128[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m return from getSumCashOut: 128[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 372[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:06:38.773] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m return from getFitFrom: 128[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m return from getSumCashOut: 128[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 372[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:06:38.774] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m return from getFitFrom: 128[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m return from getSumCashOut: 128[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 172[39m
[10:06:38.775] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:06:38.776] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:06:38.776] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:06:38.776] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:06:38.776] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:38.776] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:06:38.776] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:06:38.776] [90mTRACE[39m (Function): [36m return from getFitFrom: 128[39m
[10:06:38.776] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:06:38.776] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.776] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:06:38.776] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.776] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:06:38.776] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.776] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:06:38.776] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.793] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:06:38.793] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.793] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:06:38.793] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:06:38.793] [90mTRACE[39m (Function): [36m return from getSumCashOut: 128[39m
[10:06:38.793] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 172[39m
[10:06:38.793] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:06:38.794] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:06:38.794] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":32},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:06:38.939] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:06:38.940] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":32,"type":"acknowledge"}}[39m
[10:06:38.771] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":372,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":172,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:06:59.550] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":372,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":172,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
función de success
función de final
[10:06:59.549] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:06:59.549] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:06:59.548] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":137,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:06:59.548] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:06:59.548] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:06:59.548] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:59.548] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:06:59.548] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:59.548] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:06:59.548] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:06:59.549] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":372,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":172,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:06:59.549] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:06:59.682] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":31,"type":"completion"}}[39m
[10:06:59.548] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:06:59.548] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:06:59.548] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":137,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:06:59.548] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":137,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:06:59.617] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:06:59.617] [33mWARN[39m (CashDispenser): [36mwaitCompletionMessage::Cuidado, ha llegado complete tarde.Estamos tratando el complete con requestId: 32 y el lastCompleteRequestId es: 31[39m
[10:06:59.617] [33mWARN[39m (CashDispenser): [36mlastCompletionMsg: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":31,"type":"completion"}}[39m
[10:06:59.682] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":371,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":171,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:07:04.671] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":371,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":171,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:07:04.725] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:07:04.670] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:07:04.670] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:07:04.726] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:07:04.669] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:07:04.669] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:07:04.669] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:07:04.669] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:04.670] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:07:04.670] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:04.670] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:07:04.670] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:04.670] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":371,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":171,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:07:04.670] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:07:04.725] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":32,"type":"completion"}}[39m
[10:07:04.727] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":33},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:07:04.669] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:07:04.669] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:07:04.669] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:07:04.669] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:07:04.669] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":128,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:07:04.724] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:07:04.832] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:07:04.832] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":33,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":371,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":171,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:07:09.693] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:07:09.693] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:07:09.693] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:07:09.693] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:07:09.755] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:07:09.755] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:07:09.756] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:07:09.756] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:07:09.757] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 10 -------------------------------
[10:07:09.826] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:07:09.827] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:07:09.763] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":371,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":171,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:07:09.828] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:07:09.829] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:07:09.757] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:07:09.757] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:07:09.693] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:07:09.693] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:07:09.756] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:07:09.757] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:07:09.757] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:07:09.757] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:09.757] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:07:09.757] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:09.757] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:07:09.757] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:09.757] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":371,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":171,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:07:09.757] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:07:09.826] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":33,"type":"completion"}}[39m
[CD] en retract
[CD] en retractFunction
[10:07:24.832] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":34},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:07:24.918] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:07:24.918] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":34,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 10 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:07:25.834] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":137,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:07:25.835] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":137,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:07:25.835] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:07:25.835] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:07:25.835] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:07:25.835] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:07:25.835] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:07:25.835] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:07:25.835] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m return from getFitFrom: 129[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m return from getSumCashOut: 129[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 371[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:07:25.836] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:25.837] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:07:25.837] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:07:25.837] [90mTRACE[39m (Function): [36m return from getFitFrom: 129[39m
[10:07:25.837] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:07:25.837] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m return from getSumCashOut: 129[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 371[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:07:25.838] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m return from getFitFrom: 129[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m return from getSumCashOut: 129[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 171[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:07:25.839] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m return from getFitFrom: 129[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m return from getSumCashOut: 129[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 171[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:07:25.840] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:07:25.841] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":35},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:07:25.918] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:07:25.973] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":35,"type":"acknowledge"}}[39m
[10:07:25.834] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":371,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":171,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:07:46.787] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":138,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:07:46.787] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:07:46.787] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:07:46.787] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:46.787] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:07:46.787] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:46.787] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:07:46.787] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:46.788] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":371,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":171,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:07:46.788] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:07:46.872] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":34,"type":"completion"}}[39m
[10:07:46.789] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":371,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":171,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:07:46.787] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:07:46.787] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:07:46.787] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":138,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:07:46.787] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":138,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:07:46.872] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:07:46.872] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[10:07:46.788] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:07:46.788] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":370,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":170,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:07:51.887] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:07:51.887] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:07:52.032] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:07:51.887] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:07:51.887] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:07:51.887] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:07:51.887] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:51.887] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:07:51.887] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:51.887] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:07:51.887] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:51.887] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":370,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":170,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:07:51.887] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:07:52.029] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":35,"type":"completion"}}[39m
[10:07:52.033] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":36},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:07:51.888] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":370,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":170,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:07:52.031] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:07:51.886] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:07:51.886] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:07:51.887] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:07:51.887] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:07:51.887] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":129,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:07:51.962] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:07:52.151] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:07:52.151] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":36,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":370,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":170,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 11 -------------------------------
[10:07:57.714] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:07:57.714] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:07:57.776] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:07:57.777] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:07:57.777] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:07:57.777] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:57.777] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:07:57.777] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:57.777] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:07:57.777] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:07:57.777] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":370,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":170,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:07:57.777] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:07:57.842] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":36,"type":"completion"}}[39m
[10:07:57.778] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":370,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":170,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:07:57.842] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:07:57.843] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:07:57.714] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:07:57.714] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:07:57.714] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:07:57.714] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:07:57.776] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:07:57.776] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:07:57.776] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:07:57.777] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:07:57.777] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:07:57.842] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:07:57.842] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:07:57.777] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:07:57.777] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[CD] en retract
[CD] en retractFunction
[10:08:12.845] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":37},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:08:12.929] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:08:12.929] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":37,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 11 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:08:13.848] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":138,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:08:13.849] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":138,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:08:13.849] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:08:13.849] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:08:13.849] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:08:13.849] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:08:13.849] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:08:13.849] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:08:13.849] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:08:13.850] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:08:13.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:08:13.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 130[39m
[10:08:13.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:08:13.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:08:13.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:08:13.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:08:13.851] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.851] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:08:13.851] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.851] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:08:13.851] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.851] [90mTRACE[39m (Function): [36m return from getSumCashOut: 130[39m
[10:08:13.851] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 370[39m
[10:08:13.851] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:08:13.853] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:08:13.853] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:08:13.854] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:08:13.854] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:08:13.854] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:08:13.854] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:08:13.854] [90mTRACE[39m (Function): [36m return from getFitFrom: 130[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m return from getSumCashOut: 130[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 370[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:08:13.855] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m return from getFitFrom: 130[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m return from getSumCashOut: 130[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 170[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:08:13.856] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m return from getFitFrom: 130[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m return from getSumCashOut: 130[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 170[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:08:13.857] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:08:13.857] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":38},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:08:13.985] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:08:13.985] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":38,"type":"acknowledge"}}[39m
[10:08:13.847] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":370,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":170,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:08:34.691] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":139,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:08:34.692] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:08:34.692] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:08:34.692] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:08:34.692] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:08:34.692] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:08:34.692] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:08:34.692] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:08:34.692] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":370,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":170,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:08:34.692] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:08:34.753] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":37,"type":"completion"}}[39m
[10:08:34.691] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:08:34.691] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:08:34.691] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":139,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:08:34.692] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":139,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:08:34.753] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:08:34.753] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[10:08:34.692] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:08:34.692] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:08:34.693] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":370,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":170,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":369,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":169,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:08:39.769] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:08:39.770] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:08:39.770] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:08:39.770] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:08:39.770] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:08:39.770] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:08:39.770] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:08:39.770] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:08:39.770] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":369,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":169,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:08:39.770] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:08:39.832] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":38,"type":"completion"}}[39m
[10:08:39.836] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":39},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:08:39.769] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:08:39.769] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:08:39.770] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:08:39.770] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:08:39.770] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":130,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:08:39.832] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:08:39.894] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:08:39.894] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":39,"type":"acknowledge"}}[39m
[10:08:39.770] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:08:39.770] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:08:39.834] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:08:39.772] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":369,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":169,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:08:39.833] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":369,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":169,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 12 -------------------------------
[10:08:45.588] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":369,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":169,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:08:45.665] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:08:45.666] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:08:45.524] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:08:45.525] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:08:45.586] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:08:45.586] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:08:45.587] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:08:45.587] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:08:45.587] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:08:45.587] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:08:45.587] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:08:45.587] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:08:45.587] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":369,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":169,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:08:45.587] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:08:45.665] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":39,"type":"completion"}}[39m
[10:08:45.524] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:08:45.524] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:08:45.525] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:08:45.525] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:08:45.586] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:08:45.586] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:08:45.586] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:08:45.586] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:08:45.586] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:08:45.665] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:08:45.665] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:08:45.587] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:08:45.587] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[CD] en retract
[CD] en retractFunction
[10:09:00.672] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":40},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:09:00.770] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:09:00.802] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":40,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 12 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:09:01.672] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":139,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":139,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m return from getFitFrom: 131[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m return from getSumCashOut: 131[39m
[10:09:01.673] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 369[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m return from getFitFrom: 131[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m return from getSumCashOut: 131[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 369[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:09:01.674] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m return from getFitFrom: 131[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m return from getSumCashOut: 131[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 169[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:09:01.675] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m return from getFitFrom: 131[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m return from getSumCashOut: 131[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 169[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:09:01.676] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:09:01.676] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":41},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:09:01.754] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:09:01.802] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":41,"type":"acknowledge"}}[39m
[10:09:01.672] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":369,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":169,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:09:22.660] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:09:22.660] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:09:22.660] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":140,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:09:22.660] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:09:22.660] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:09:22.660] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:22.660] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:09:22.660] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:22.660] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:09:22.660] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:22.660] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":369,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":169,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:09:22.661] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:09:22.784] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":40,"type":"completion"}}[39m
[10:09:22.660] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:09:22.660] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:09:22.660] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":140,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:09:22.660] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":140,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:09:22.724] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:09:22.785] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[10:09:22.662] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":369,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":169,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":368,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":168,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:09:27.744] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:09:27.744] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:09:27.870] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:09:27.743] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:09:27.743] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:09:27.743] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:09:27.743] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:27.743] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:09:27.743] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:27.743] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:09:27.743] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:27.744] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":368,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":168,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:09:27.744] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:09:27.868] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":41,"type":"completion"}}[39m
[10:09:27.872] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":42},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:09:27.743] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:09:27.743] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:09:27.743] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:09:27.743] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:09:27.743] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":131,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:09:27.805] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:09:27.938] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:09:27.938] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":42,"type":"acknowledge"}}[39m
[10:09:27.744] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":368,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":168,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:09:27.869] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:09:33.513] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:09:33.514] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":368,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":168,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:09:33.570] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:09:33.571] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:09:33.571] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:09:33.571] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:33.571] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:09:33.571] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:33.571] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:09:33.571] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:33.571] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":368,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":168,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:09:33.571] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:09:33.513] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:09:33.513] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:09:33.514] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:09:33.514] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:09:33.570] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:09:33.570] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:09:33.570] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:09:33.571] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:09:33.571] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 13 -------------------------------
[10:09:33.647] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":42,"type":"completion"}}[39m
[10:09:33.647] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:09:33.649] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:09:33.572] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":368,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":168,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:09:33.649] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:09:33.651] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:09:33.571] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:09:33.571] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[CD] en retract
[CD] en retractFunction
[10:09:48.745] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:09:48.778] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":43,"type":"acknowledge"}}[39m
[10:09:48.653] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":43},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
-----------------------Starting next iteration 13 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:09:49.666] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[10:09:49.785] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:09:49.804] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":44,"type":"acknowledge"}}[39m
[10:09:49.666] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":140,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":140,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m return from getFitFrom: 132[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m return from getSumCashOut: 132[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 368[39m
[10:09:49.667] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m return from getFitFrom: 132[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m return from getSumCashOut: 132[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 368[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:09:49.668] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m return from getFitFrom: 132[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m return from getSumCashOut: 132[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 168[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:09:49.669] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m return from getFitFrom: 132[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m return from getSumCashOut: 132[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 168[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:09:49.670] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:09:49.670] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":44},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":368,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":168,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:10:10.635] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:10:10.635] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:10:10.634] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":141,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:10:10.634] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:10:10.634] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:10:10.635] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:10.635] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:10:10.635] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:10.635] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:10:10.635] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:10.635] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":368,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":168,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:10:10.635] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:10:10.759] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":43,"type":"completion"}}[39m
[10:10:10.636] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":368,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":168,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:10:10.634] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:10:10.634] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:10:10.634] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":141,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:10:10.634] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":141,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:10:10.697] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:10:10.759] [33mWARN[39m (CashDispenser): [36mwaitCompletionMessage::Cuidado, ha llegado complete tarde.Estamos tratando el complete con requestId: 44 y el lastCompleteRequestId es: 43[39m
[10:10:10.759] [33mWARN[39m (CashDispenser): [36mlastCompletionMsg: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":43,"type":"completion"}}[39m
[10:10:10.760] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":367,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":167,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:10:15.732] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:10:15.732] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:10:15.857] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:10:15.731] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:10:15.731] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:10:15.731] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:10:15.731] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:15.731] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:10:15.731] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:15.731] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:10:15.731] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:15.731] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":367,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":167,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:10:15.732] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:10:15.856] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":44,"type":"completion"}}[39m
[10:10:15.859] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":45},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:10:15.733] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":367,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":167,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:10:15.856] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:10:15.731] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:10:15.731] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:10:15.731] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:10:15.731] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:10:15.731] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":132,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:10:15.793] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:10:15.980] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:10:15.980] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":45,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":367,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":167,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 14 -------------------------------
[10:10:21.361] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:10:21.361] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:10:21.299] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:10:21.299] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:10:21.361] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:10:21.361] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:10:21.361] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:10:21.361] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:21.361] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:10:21.361] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:21.361] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:10:21.361] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:21.361] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":367,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":167,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:10:21.362] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:10:21.424] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":45,"type":"completion"}}[39m
[10:10:21.363] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":367,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":167,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:10:21.425] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:10:21.426] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:10:21.299] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:10:21.299] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:10:21.299] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:10:21.299] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:10:21.361] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:10:21.361] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:10:21.361] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:10:21.361] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:10:21.361] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:10:21.424] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:10:21.425] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[CD] en retract
[CD] en retractFunction
[10:10:36.426] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":46},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:10:36.551] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:10:36.551] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":46,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 14 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:10:37.435] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":141,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:10:37.435] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":141,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:10:37.435] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:10:37.435] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:10:37.435] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:10:37.435] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:10:37.435] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:10:37.435] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:10:37.435] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getFitFrom: 133[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getSumCashOut: 133[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 367[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getFitFrom: 133[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getSumCashOut: 133[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 367[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:10:37.436] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m return from getFitFrom: 133[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m return from getSumCashOut: 133[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 167[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:10:37.437] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m return from getFitFrom: 133[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m return from getSumCashOut: 133[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 167[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:10:37.438] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:10:37.438] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":47},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:10:37.528] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:10:37.558] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":47,"type":"acknowledge"}}[39m
[10:10:37.434] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":367,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":167,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:10:58.192] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:10:58.192] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
función de success
función de final
[10:10:58.193] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":367,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":167,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:10:58.191] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":142,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:10:58.191] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:10:58.191] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:10:58.191] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:58.191] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:10:58.191] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:58.191] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:10:58.191] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:10:58.192] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":367,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":167,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:10:58.192] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:10:58.273] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":46,"type":"completion"}}[39m
[10:10:58.191] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:10:58.191] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:10:58.191] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":142,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:10:58.191] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":142,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:10:58.272] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:10:58.273] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":366,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":166,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:11:03.341] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:11:03.341] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:11:03.484] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:11:03.342] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":366,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":166,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:11:03.483] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:11:03.340] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:11:03.340] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:11:03.340] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:11:03.340] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:03.340] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:11:03.340] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:03.340] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:11:03.340] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:03.341] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":366,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":166,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:11:03.341] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:11:03.482] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":47,"type":"completion"}}[39m
[10:11:03.486] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":48},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:11:03.340] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:11:03.340] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:11:03.340] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:11:03.340] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:11:03.340] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":133,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:11:03.419] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:11:03.603] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:11:03.603] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":48,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":366,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":166,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 15 -------------------------------
[10:11:09.457] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:11:09.457] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:11:09.458] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":366,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":166,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:11:09.528] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:11:09.529] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:11:09.394] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:11:09.394] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:11:09.456] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:11:09.456] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:11:09.456] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:11:09.456] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:09.456] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:11:09.456] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:09.457] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:11:09.457] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:09.457] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":366,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":166,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:11:09.457] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:11:09.527] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":48,"type":"completion"}}[39m
[10:11:09.394] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:11:09.394] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:11:09.394] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:11:09.394] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:11:09.456] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:11:09.456] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:11:09.456] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:11:09.456] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:11:09.456] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:11:09.527] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:11:09.527] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[CD] en retract
[CD] en retractFunction
[10:11:24.620] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:11:24.685] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":49,"type":"acknowledge"}}[39m
[10:11:24.541] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":49},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
-----------------------Starting next iteration 15 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:11:25.535] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":142,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:11:25.535] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":142,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m return from getFitFrom: 134[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m return from getSumCashOut: 134[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 366[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:11:25.536] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m return from getFitFrom: 134[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m return from getSumCashOut: 134[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 366[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:11:25.537] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m return from getFitFrom: 134[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m return from getSumCashOut: 134[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 166[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:11:25.538] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m return from getFitFrom: 134[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m return from getSumCashOut: 134[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 166[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:11:25.539] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:11:25.539] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":50},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:11:25.599] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:11:25.658] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":50,"type":"acknowledge"}}[39m
[10:11:25.535] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":366,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":166,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:11:46.457] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":143,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:11:46.457] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:11:46.457] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:11:46.457] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:46.457] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:11:46.457] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:46.457] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:11:46.457] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:46.457] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":366,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":166,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:11:46.458] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:11:46.583] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":49,"type":"completion"}}[39m
[10:11:46.457] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:11:46.457] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:11:46.457] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":143,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:11:46.457] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":143,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:11:46.522] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:11:46.582] [33mWARN[39m (CashDispenser): [36mwaitCompletionMessage::Cuidado, ha llegado complete tarde.Estamos tratando el complete con requestId: 50 y el lastCompleteRequestId es: 49[39m
[10:11:46.583] [33mWARN[39m (CashDispenser): [36mlastCompletionMsg: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":49,"type":"completion"}}[39m
[10:11:46.583] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[10:11:46.459] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":366,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":166,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:11:46.457] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:11:46.457] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":365,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":165,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:11:51.538] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:11:51.538] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:11:51.663] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:11:51.538] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:11:51.538] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:11:51.538] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:11:51.538] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:51.538] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:11:51.538] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:51.538] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:11:51.538] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:51.538] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":365,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":165,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:11:51.539] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:11:51.662] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":50,"type":"completion"}}[39m
[10:11:51.664] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":51},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:11:51.538] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:11:51.538] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:11:51.538] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:11:51.538] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:11:51.538] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":134,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:11:51.602] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:11:51.771] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:11:51.771] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":51,"type":"acknowledge"}}[39m
[10:11:51.540] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":365,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":165,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:11:51.662] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":365,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":165,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 16 -------------------------------
[10:11:57.161] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:11:57.162] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:11:57.217] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:11:57.218] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:11:57.218] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:11:57.218] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:57.218] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:11:57.218] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:57.218] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:11:57.218] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:11:57.218] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":365,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":165,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:11:57.219] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:11:57.306] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":51,"type":"completion"}}[39m
[10:11:57.161] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:11:57.161] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:11:57.161] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:11:57.162] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:11:57.217] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:11:57.217] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:11:57.217] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:11:57.218] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:11:57.218] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:11:57.306] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:11:57.307] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:11:57.220] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":365,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":165,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:11:57.307] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:11:57.309] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:11:57.218] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:11:57.218] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[CD] en retract
[CD] en retractFunction
[10:12:12.323] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":52},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:12:12.380] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:12:12.380] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":52,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 16 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:12:13.321] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":143,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:12:13.321] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":143,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:12:13.321] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:12:13.321] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:12:13.321] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:12:13.321] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:12:13.321] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 135[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m return from getSumCashOut: 135[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 365[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:12:13.322] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m return from getFitFrom: 135[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m return from getSumCashOut: 135[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 365[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:12:13.323] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m return from getFitFrom: 135[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m return from getSumCashOut: 135[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 165[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:12:13.324] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m return from getFitFrom: 135[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m return from getSumCashOut: 135[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 165[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:12:13.325] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:12:13.325] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":53},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:12:13.444] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:12:13.445] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":53,"type":"acknowledge"}}[39m
[10:12:13.321] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":365,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":165,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:12:34.136] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":365,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":165,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
función de success
función de final
[10:12:34.135] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:12:34.135] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:12:34.134] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":144,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:12:34.134] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:12:34.134] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:12:34.134] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:12:34.134] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:12:34.134] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:12:34.135] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:12:34.135] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:12:34.135] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":365,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":165,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:12:34.135] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:12:34.218] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":52,"type":"completion"}}[39m
[10:12:34.134] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:12:34.134] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:12:34.134] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":144,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:12:34.134] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":144,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:12:34.218] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:12:34.219] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":364,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":164,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:12:39.317] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":364,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":164,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:12:39.384] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:12:39.315] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:12:39.316] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:12:39.385] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:12:39.315] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:12:39.315] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:12:39.315] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:12:39.315] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:12:39.315] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:12:39.315] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:12:39.315] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:12:39.315] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:12:39.315] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":364,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":164,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:12:39.316] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:12:39.384] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":53,"type":"completion"}}[39m
[10:12:39.387] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":54},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:12:39.314] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:12:39.315] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:12:39.315] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:12:39.315] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:12:39.315] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":135,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:12:39.384] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:12:39.501] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:12:39.501] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":54,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":364,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":164,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:12:45.171] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:12:45.171] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:12:45.224] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:12:45.224] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:12:45.224] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:12:45.224] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:12:45.225] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:12:45.225] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:12:45.225] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:12:45.225] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:12:45.225] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":364,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":164,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:12:45.225] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 17 -------------------------------
[10:12:45.296] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":54,"type":"completion"}}[39m
[10:12:45.171] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:12:45.171] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:12:45.171] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:12:45.171] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:12:45.224] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:12:45.224] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:12:45.224] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:12:45.224] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:12:45.224] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:12:45.296] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:12:45.296] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:12:45.226] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":364,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":164,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:12:45.297] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:12:45.298] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:12:45.225] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:12:45.225] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[CD] en retract
[CD] en retractFunction
[10:13:00.303] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":55},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:13:00.378] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:13:00.378] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":55,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 17 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:13:01.321] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":144,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":144,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 136[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m return from getSumCashOut: 136[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 364[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:13:01.322] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m return from getFitFrom: 136[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m return from getSumCashOut: 136[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 364[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:13:01.323] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m return from getFitFrom: 136[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m return from getSumCashOut: 136[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 164[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:13:01.324] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m return from getFitFrom: 136[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m return from getSumCashOut: 136[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 164[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:13:01.325] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:13:01.325] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":56},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:13:01.407] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:13:01.451] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":56,"type":"acknowledge"}}[39m
[10:13:01.321] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":364,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":164,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:13:22.130] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":364,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":164,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:13:22.129] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":145,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:13:22.129] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:13:22.129] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:13:22.129] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:22.129] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:13:22.129] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:22.129] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:13:22.129] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:22.130] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":364,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":164,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:13:22.130] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
función de success
función de final
[10:13:22.129] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:13:22.129] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:13:22.129] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":145,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:13:22.129] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":145,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:13:22.198] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:13:22.199] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[10:13:22.199] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":55,"type":"completion"}}[39m
[10:13:22.130] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:13:22.130] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":363,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":163,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:13:27.222] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:13:27.222] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:13:27.223] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:13:27.223] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:13:27.223] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:13:27.293] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:13:27.225] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":363,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":163,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:13:27.352] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:13:27.222] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:13:27.223] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:13:27.223] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:13:27.223] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:27.223] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":136,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:13:27.223] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:27.223] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:13:27.223] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:27.223] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":363,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":163,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:13:27.224] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:13:27.351] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":56,"type":"completion"}}[39m
[10:13:27.354] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":57},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:13:27.473] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:13:27.473] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":57,"type":"acknowledge"}}[39m
[10:13:27.223] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:13:27.223] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:13:27.353] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":363,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":163,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:13:33.052] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:13:33.052] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 18 -------------------------------
[10:13:32.989] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:13:32.989] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:13:33.051] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:13:33.052] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:13:33.052] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:13:33.052] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:33.052] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:13:33.052] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:33.052] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:13:33.052] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:33.052] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":363,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":163,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:13:33.052] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:13:33.124] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":57,"type":"completion"}}[39m
[10:13:33.053] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":363,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":163,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:13:33.125] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:13:33.125] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:13:32.989] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:13:32.989] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:13:32.989] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:13:32.989] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:13:33.051] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:13:33.051] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:13:33.052] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:13:33.052] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:13:33.052] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:13:33.124] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:13:33.124] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[CD] en retract
[CD] en retractFunction
[10:13:48.129] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":58},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:13:48.208] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:13:48.208] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":58,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 18 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:13:49.140] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":145,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:13:49.140] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":145,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:13:49.140] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:13:49.140] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:13:49.140] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:13:49.140] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:13:49.141] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:13:49.141] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:13:49.141] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:49.141] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:13:49.141] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:13:49.141] [90mTRACE[39m (Function): [36m return from getFitFrom: 137[39m
[10:13:49.141] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:49.141] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.141] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:49.141] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.141] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:49.141] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.141] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:13:49.141] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getSumCashOut: 137[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 363[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getFitFrom: 137[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getSumCashOut: 137[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 363[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:13:49.142] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m return from getFitFrom: 137[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m return from getSumCashOut: 137[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 163[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:13:49.143] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:13:49.144] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:13:49.144] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:13:49.144] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m return from getFitFrom: 137[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m return from getSumCashOut: 137[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 163[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:13:49.149] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:13:49.149] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":59},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:13:49.140] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[10:13:49.351] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:13:49.351] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":59,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":363,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":163,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:14:10.057] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":363,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":163,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
función de success
función de final
[10:14:10.055] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":146,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:14:10.055] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:14:10.055] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:14:10.055] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:10.055] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:14:10.055] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:10.055] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:14:10.055] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:10.055] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":363,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":163,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:14:10.056] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:14:10.117] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":58,"type":"completion"}}[39m
[10:14:10.055] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:14:10.055] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:14:10.055] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":146,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:14:10.055] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":146,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:14:10.117] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:14:10.117] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[10:14:10.055] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:14:10.055] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":362,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":162,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:14:15.076] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":362,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":162,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:14:15.139] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:14:15.074] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:14:15.074] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:14:15.074] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:14:15.074] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:15.074] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:14:15.074] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:15.074] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:14:15.074] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:15.074] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":362,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":162,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:14:15.075] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:14:15.139] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":59,"type":"completion"}}[39m
[10:14:15.142] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":60},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:14:15.074] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:14:15.074] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:14:15.141] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:14:15.074] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:14:15.074] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:14:15.074] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:14:15.074] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:14:15.074] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":137,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:14:15.138] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:14:15.262] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:14:15.262] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":60,"type":"acknowledge"}}[39m
[10:14:21.082] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:14:21.082] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:14:21.082] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:14:21.082] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":362,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":162,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:14:21.147] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:14:21.147] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:14:21.147] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:14:21.147] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:14:21.147] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 19 -------------------------------
[10:14:21.208] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:14:21.208] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:14:21.148] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":362,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":162,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:14:21.208] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:14:21.209] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:14:21.082] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:14:21.082] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:14:21.147] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:14:21.147] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:14:21.147] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:14:21.147] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:21.147] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:14:21.147] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:21.147] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:14:21.147] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:21.148] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":362,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":162,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:14:21.148] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:14:21.208] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":60,"type":"completion"}}[39m
[10:14:21.148] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:14:21.148] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[CD] en retract
[CD] en retractFunction
[10:14:36.222] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":61},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:14:36.301] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:14:36.373] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":61,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 19 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:14:37.215] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":146,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":146,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m return from getFitFrom: 138[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m return from getSumCashOut: 138[39m
[10:14:37.216] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 362[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m return from getFitFrom: 138[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m return from getSumCashOut: 138[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 362[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:14:37.217] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m return from getFitFrom: 138[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m return from getSumCashOut: 138[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 162[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:14:37.218] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m return from getFitFrom: 138[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m return from getSumCashOut: 138[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 162[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:14:37.219] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:14:37.219] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":62},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:14:37.215] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[10:14:37.290] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:14:37.356] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":62,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":362,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":162,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:14:58.009] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":362,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":162,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
función de success
función de final
[10:14:58.007] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":147,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:14:58.007] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:14:58.007] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:14:58.007] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:58.007] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:14:58.007] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:58.007] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:14:58.007] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:14:58.007] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":362,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":162,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:14:58.007] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:14:58.163] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":61,"type":"completion"}}[39m
[10:14:58.007] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:14:58.007] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:14:58.006] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:14:58.006] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:14:58.007] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":147,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:14:58.007] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":147,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:14:58.100] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:14:58.162] [33mWARN[39m (CashDispenser): [36mwaitCompletionMessage::Cuidado, ha llegado complete tarde.Estamos tratando el complete con requestId: 62 y el lastCompleteRequestId es: 61[39m
[10:14:58.162] [33mWARN[39m (CashDispenser): [36mlastCompletionMsg: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":61,"type":"completion"}}[39m
[10:14:58.163] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":361,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":161,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:15:03.172] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:15:03.172] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:15:03.172] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:15:03.173] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:15:03.173] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:15:03.246] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:15:03.175] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":361,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":161,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:15:03.317] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:15:03.437] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:15:03.437] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":63,"type":"acknowledge"}}[39m
[10:15:03.172] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:15:03.173] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:15:03.173] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:15:03.173] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:03.173] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":138,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:15:03.173] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:03.173] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:15:03.173] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:03.173] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":361,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":161,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:15:03.174] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:15:03.316] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":62,"type":"completion"}}[39m
[10:15:03.320] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":63},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:15:03.173] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:15:03.173] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:15:03.318] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":361,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":161,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 20 -------------------------------
[10:15:08.847] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:15:08.847] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:15:08.910] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:15:08.911] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:15:08.911] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:15:08.911] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:08.911] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:15:08.911] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:08.911] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:15:08.911] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:08.911] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":361,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":161,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:15:08.911] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:15:08.995] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":63,"type":"completion"}}[39m
[10:15:08.911] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:15:08.911] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:15:08.914] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":361,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":161,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:15:08.996] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:15:08.997] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:15:08.847] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:15:08.847] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:15:08.847] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:15:08.847] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:15:08.910] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:15:08.910] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:15:08.910] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:15:08.911] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:15:08.911] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:15:08.995] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:15:08.996] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[CD] en retract
[CD] en retractFunction
[10:15:24.003] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":64},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:15:24.083] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:15:24.083] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":64,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 20 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:15:25.006] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":147,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":147,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m return from getFitFrom: 139[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m return from getSumCashOut: 139[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 361[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:15:25.007] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m return from getFitFrom: 139[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m return from getSumCashOut: 139[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 361[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:15:25.008] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m return from getFitFrom: 139[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m return from getSumCashOut: 139[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 161[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m return from getFitFrom: 139[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.009] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:15:25.010] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.010] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:15:25.010] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.010] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:15:25.010] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.010] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:15:25.010] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:15:25.010] [90mTRACE[39m (Function): [36m return from getSumCashOut: 139[39m
[10:15:25.010] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 161[39m
[10:15:25.010] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:15:25.010] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:15:25.010] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":65},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:15:25.113] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:15:25.128] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":65,"type":"acknowledge"}}[39m
[10:15:25.006] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":361,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":161,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:15:45.982] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:15:45.982] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
función de success
función de final
[10:15:45.984] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":361,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":161,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:15:45.981] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:15:45.981] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:15:45.982] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":148,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:15:45.982] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":148,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:15:46.047] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:15:46.047] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[10:15:45.981] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":148,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:15:45.982] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:15:45.982] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:15:45.982] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:45.982] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:15:45.982] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:45.982] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:15:45.982] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:45.982] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":361,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":161,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:15:45.982] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:15:46.047] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":64,"type":"completion"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":360,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":160,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:15:51.113] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:15:51.113] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:15:51.181] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:15:51.114] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":360,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":160,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:15:51.180] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:15:51.112] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:15:51.113] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:15:51.113] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:15:51.113] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:51.113] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:15:51.113] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:51.113] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:15:51.113] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:51.113] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":360,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":160,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:15:51.113] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:15:51.180] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":65,"type":"completion"}}[39m
[10:15:51.183] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":66},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:15:51.112] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:15:51.112] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:15:51.113] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:15:51.113] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:15:51.113] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":139,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:15:51.180] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:15:51.310] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:15:51.310] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":66,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":360,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":160,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:15:56.888] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:15:56.888] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:15:56.950] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:15:56.951] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:15:56.951] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:15:56.951] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:56.951] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:15:56.951] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:56.951] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:15:56.951] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:15:56.951] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":360,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":160,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:15:56.951] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:15:56.888] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:15:56.888] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:15:56.888] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:15:56.888] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:15:56.950] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:15:56.950] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:15:56.951] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:15:56.951] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:15:56.951] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 21 -------------------------------
[10:15:57.059] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:15:57.060] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:15:57.059] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":66,"type":"completion"}}[39m
[10:15:56.951] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:15:56.951] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:15:56.952] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":360,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":160,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:15:57.060] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:15:57.064] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[CD] en retract
[CD] en retractFunction
[10:16:12.066] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":67},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:16:12.139] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:16:12.139] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":67,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 21 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:16:13.074] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":148,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:16:13.075] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":148,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:16:13.075] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:16:13.075] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:16:13.075] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:16:13.075] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:16:13.075] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:16:13.075] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:16:13.075] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m return from getFitFrom: 140[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m return from getSumCashOut: 140[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 360[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:16:13.076] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m return from getFitFrom: 140[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m return from getSumCashOut: 140[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 360[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m return from getFitFrom: 140[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.077] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:16:13.078] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.078] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:16:13.078] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.078] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:16:13.078] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.078] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:16:13.078] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.078] [90mTRACE[39m (Function): [36m return from getSumCashOut: 140[39m
[10:16:13.078] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 160[39m
[10:16:13.078] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:16:13.078] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:16:13.078] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:16:13.078] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:16:13.078] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m return from getFitFrom: 140[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m return from getSumCashOut: 140[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 160[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:16:13.079] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:16:13.079] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":68},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:16:13.200] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:16:13.200] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":68,"type":"acknowledge"}}[39m
[10:16:13.074] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":360,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":160,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:16:33.987] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":360,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":160,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
función de success
función de final
[10:16:33.987] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:16:33.987] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:16:33.986] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":149,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:16:33.986] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:16:33.986] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:16:33.986] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:16:33.986] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:16:33.986] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:16:33.986] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:16:33.986] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:16:33.987] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":360,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":160,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:16:33.987] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:16:34.075] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":67,"type":"completion"}}[39m
[10:16:33.986] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:16:33.986] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:16:33.986] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":149,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:16:33.986] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":149,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:16:34.075] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:16:34.076] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":359,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:16:39.115] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":359,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":159,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:16:39.182] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:16:39.114] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:16:39.114] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:16:39.183] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:16:39.113] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:16:39.114] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:16:39.114] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:16:39.114] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:16:39.114] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:16:39.114] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:16:39.114] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:16:39.114] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:16:39.114] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":359,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:16:39.114] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:16:39.181] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":68,"type":"completion"}}[39m
[10:16:39.185] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":69},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:16:39.113] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:16:39.113] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:16:39.114] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:16:39.114] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:16:39.114] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":140,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:16:39.181] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:16:39.302] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:16:39.302] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":69,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":359,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 22 -------------------------------
[10:16:44.700] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:16:44.700] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:16:44.762] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:16:44.763] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:16:44.763] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:16:44.763] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:16:44.763] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:16:44.763] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:16:44.763] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:16:44.763] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:16:44.763] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":359,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:16:44.763] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:16:44.830] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":69,"type":"completion"}}[39m
[10:16:44.700] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:16:44.700] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:16:44.700] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:16:44.700] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:16:44.762] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:16:44.762] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:16:44.763] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:16:44.763] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:16:44.763] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:16:44.830] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:16:44.830] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:16:44.764] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":359,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":159,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:16:44.831] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:16:44.832] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:16:44.763] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:16:44.763] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[CD] en retract
[CD] en retractFunction
[10:16:59.922] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:16:59.981] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":70,"type":"acknowledge"}}[39m
[10:16:59.840] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":70},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
-----------------------Starting next iteration 22 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:17:00.834] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":149,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:17:00.834] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":149,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:17:00.834] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:17:00.834] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m return from getFitFrom: 141[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.835] [90mTRACE[39m (Function): [36m return from getSumCashOut: 141[39m
[10:17:00.848] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 359[39m
[10:17:00.848] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:17:00.848] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:17:00.848] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:17:00.848] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:17:00.848] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m return from getFitFrom: 141[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m return from getSumCashOut: 141[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 359[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:17:00.849] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 141[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getSumCashOut: 141[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 159[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 141[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getSumCashOut: 141[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 159[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:17:00.850] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:17:00.851] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":71},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:17:00.834] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[10:17:00.911] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:17:00.978] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":71,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":359,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:17:21.776] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":359,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":159,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:17:21.774] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":150,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:17:21.774] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:17:21.774] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:17:21.774] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:21.774] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:17:21.774] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:21.774] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:17:21.774] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:21.774] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":359,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:17:21.774] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:17:21.899] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":70,"type":"completion"}}[39m
[10:17:21.774] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:17:21.774] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:17:21.773] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:17:21.773] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:17:21.774] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":150,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:17:21.774] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":150,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:17:21.842] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:17:21.899] [33mWARN[39m (CashDispenser): [36mwaitCompletionMessage::Cuidado, ha llegado complete tarde.Estamos tratando el complete con requestId: 71 y el lastCompleteRequestId es: 70[39m
[10:17:21.899] [33mWARN[39m (CashDispenser): [36mlastCompletionMsg: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":70,"type":"completion"}}[39m
[10:17:21.899] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":358,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:17:26.861] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":358,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":158,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:17:26.986] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:17:26.858] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:17:26.858] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:17:26.858] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:17:26.858] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:26.858] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:17:26.858] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:26.858] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:17:26.858] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:26.858] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":358,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:17:26.859] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:17:26.985] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":71,"type":"completion"}}[39m
[10:17:26.988] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":72},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:17:26.858] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:17:26.858] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:17:26.987] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:17:26.858] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:17:26.858] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:17:26.858] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:17:26.858] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:17:26.858] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":141,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:17:26.926] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:17:27.107] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:17:27.107] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":72,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":358,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:17:32.739] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:17:32.739] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:17:32.676] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:17:32.676] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:17:32.676] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:17:32.677] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:17:32.738] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:17:32.738] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:17:32.738] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:17:32.738] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:17:32.738] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 23 -------------------------------
[10:17:32.800] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:17:32.801] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:17:32.742] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":358,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":158,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:17:32.801] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:17:32.802] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:17:32.676] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:17:32.677] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:17:32.738] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:17:32.738] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:17:32.738] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:17:32.738] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:32.739] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:17:32.739] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:32.739] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:17:32.739] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:32.739] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":358,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:17:32.739] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:17:32.800] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":72,"type":"completion"}}[39m
[CD] en retract
[CD] en retractFunction
[10:17:47.809] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":73},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:17:47.863] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:17:47.900] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":73,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 23 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:17:48.805] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[10:17:48.805] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":150,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":150,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m return from getFitFrom: 142[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m return from getSumCashOut: 142[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 358[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:17:48.806] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m return from getFitFrom: 142[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m return from getSumCashOut: 142[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 358[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:17:48.807] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getFitFrom: 142[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getSumCashOut: 142[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 158[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getFitFrom: 142[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getSumCashOut: 142[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 158[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:17:48.808] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:17:48.808] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":74},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:17:48.899] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:17:48.928] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":74,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":358,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:18:09.739] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":358,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":158,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:18:09.738] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:18:09.738] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:18:09.738] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":151,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:18:09.738] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:18:09.738] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:18:09.738] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:09.738] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:18:09.738] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:09.738] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:18:09.738] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:09.738] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":358,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:18:09.738] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:18:09.800] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":73,"type":"completion"}}[39m
[10:18:09.737] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:18:09.737] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:18:09.738] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":151,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:18:09.738] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":151,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:18:09.800] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:18:09.800] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":357,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:18:14.817] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:18:14.817] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:18:14.817] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:18:14.817] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:18:14.817] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:18:14.879] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:18:14.941] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:18:14.941] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":75,"type":"acknowledge"}}[39m
[10:18:14.820] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":357,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":157,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:18:14.879] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:18:14.817] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:18:14.817] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:18:14.817] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:18:14.817] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:14.818] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":142,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:18:14.818] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:14.818] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:18:14.818] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:14.818] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":357,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:18:14.818] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:18:14.879] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":74,"type":"completion"}}[39m
[10:18:14.881] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":75},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:18:14.818] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:18:14.818] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:18:14.880] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":357,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 24 -------------------------------
[10:18:20.525] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:18:20.525] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:18:20.587] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:18:20.587] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:18:20.587] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:18:20.587] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:20.587] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:18:20.587] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:20.588] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:18:20.588] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:20.588] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":357,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:18:20.588] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:18:20.668] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":75,"type":"completion"}}[39m
[10:18:20.588] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:18:20.588] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:18:20.525] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:18:20.525] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:18:20.525] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:18:20.525] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:18:20.587] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:18:20.587] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:18:20.587] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:18:20.587] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:18:20.587] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:18:20.636] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:18:20.668] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:18:20.589] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":357,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":157,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:18:20.668] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:18:20.669] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[CD] en retract
[CD] en retractFunction
[10:18:35.681] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":76},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:18:35.764] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:18:35.822] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":76,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 24 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:18:36.679] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":151,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:18:36.679] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":151,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:18:36.679] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:18:36.679] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:18:36.679] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:18:36.679] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:18:36.679] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:18:36.679] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:18:36.679] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m return from getFitFrom: 143[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m return from getSumCashOut: 143[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 357[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:18:36.680] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getFitFrom: 143[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getSumCashOut: 143[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 357[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getFitFrom: 143[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getSumCashOut: 143[39m
[10:18:36.681] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 157[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m return from getFitFrom: 143[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m return from getSumCashOut: 143[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 157[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:18:36.682] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:18:36.682] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":77},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:18:36.787] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:18:36.788] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":77,"type":"acknowledge"}}[39m
[10:18:36.678] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":357,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:18:57.589] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:18:57.589] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
función de success
función de final
[10:18:57.590] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":357,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":157,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:18:57.588] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":152,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:18:57.589] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:18:57.589] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:18:57.589] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:57.589] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:18:57.589] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:57.589] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:18:57.589] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:18:57.589] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":357,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:18:57.589] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:18:57.729] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":76,"type":"completion"}}[39m
[10:18:57.588] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:18:57.588] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:18:57.588] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":152,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:18:57.588] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":152,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:18:57.667] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:18:57.667] [33mWARN[39m (CashDispenser): [36mwaitCompletionMessage::Cuidado, ha llegado complete tarde.Estamos tratando el complete con requestId: 77 y el lastCompleteRequestId es: 76[39m
[10:18:57.667] [33mWARN[39m (CashDispenser): [36mlastCompletionMsg: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":76,"type":"completion"}}[39m
[10:18:57.730] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":356,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:19:02.702] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:19:02.702] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:19:02.777] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:19:02.718] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":356,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":156,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:19:02.776] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:19:02.701] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:19:02.701] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:19:02.701] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:19:02.701] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:02.701] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:19:02.701] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:02.702] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:19:02.702] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:02.702] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":356,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:19:02.702] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:19:02.776] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":77,"type":"completion"}}[39m
[10:19:02.778] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":78},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:19:02.701] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:19:02.701] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:19:02.701] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:19:02.701] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:19:02.701] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":143,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:19:02.776] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:19:02.846] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:19:02.846] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":78,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":356,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 25 -------------------------------
[10:19:08.683] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:19:08.683] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:19:08.686] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":356,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":156,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:19:08.762] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:19:08.762] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:19:08.620] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:19:08.620] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:19:08.682] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:19:08.683] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:19:08.683] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:19:08.683] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:08.683] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:19:08.683] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:08.683] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:19:08.683] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:08.683] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":356,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:19:08.684] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:19:08.761] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":78,"type":"completion"}}[39m
[10:19:08.620] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:19:08.620] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:19:08.620] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:19:08.620] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:19:08.682] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:19:08.682] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:19:08.682] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:19:08.682] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:19:08.683] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:19:08.761] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:19:08.761] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[CD] en retract
[CD] en retractFunction
[10:19:23.767] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":79},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
-----------------------Starting next iteration 25 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:19:23.898] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:19:23.952] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":79,"type":"acknowledge"}}[39m
[10:19:24.897] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:19:24.898] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":80,"type":"acknowledge"}}[39m
[10:19:24.771] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":152,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:19:24.771] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":152,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:19:24.771] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:19:24.771] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:19:24.771] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:19:24.771] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:19:24.771] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:19:24.771] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:19:24.771] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m return from getFitFrom: 144[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m return from getSumCashOut: 144[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 356[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:19:24.772] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m return from getFitFrom: 144[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m return from getSumCashOut: 144[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 356[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:19:24.773] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m return from getFitFrom: 144[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m return from getSumCashOut: 144[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 156[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:19:24.774] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m return from getFitFrom: 144[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m return from getSumCashOut: 144[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 156[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:19:24.775] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:19:24.775] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":80},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:19:24.770] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":356,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:19:45.641] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":356,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":156,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:19:45.640] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:19:45.640] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
función de success
función de final
[10:19:45.639] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:19:45.639] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:19:45.639] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":153,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:19:45.639] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":153,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:19:45.713] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:19:45.713] [33mWARN[39m (CashDispenser): [36mwaitCompletionMessage::Cuidado, ha llegado complete tarde.Estamos tratando el complete con requestId: 80 y el lastCompleteRequestId es: 79[39m
[10:19:45.713] [33mWARN[39m (CashDispenser): [36mlastCompletionMsg: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":79,"type":"completion"}}[39m
[10:19:45.771] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[10:19:45.639] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":153,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:19:45.639] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:19:45.639] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:19:45.639] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:45.639] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:19:45.639] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:45.639] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:19:45.639] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:45.640] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":356,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:19:45.640] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:19:45.770] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":79,"type":"completion"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":355,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:19:50.750] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:19:50.750] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:19:50.813] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:19:50.753] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":355,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":155,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:19:50.812] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:19:50.749] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:19:50.749] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:19:50.750] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:19:50.750] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:19:50.750] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:19:50.811] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:19:50.948] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:19:50.948] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":81,"type":"acknowledge"}}[39m
[10:19:50.750] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:19:50.750] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:19:50.750] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:19:50.750] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:50.750] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":144,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:19:50.750] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:50.750] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:19:50.750] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:50.750] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":355,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:19:50.750] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:19:50.811] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":80,"type":"completion"}}[39m
[10:19:50.814] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":81},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":355,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 26 -------------------------------
[10:19:56.363] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:19:56.363] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:19:56.363] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:19:56.363] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:19:56.423] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:19:56.423] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:19:56.423] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:19:56.423] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:19:56.423] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:19:56.496] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:19:56.497] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:19:56.363] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:19:56.363] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:19:56.423] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:19:56.423] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:19:56.423] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:19:56.423] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:56.424] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:19:56.424] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:56.424] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:19:56.424] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:19:56.424] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":355,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:19:56.424] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:19:56.497] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":81,"type":"completion"}}[39m
[10:19:56.424] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:19:56.424] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:19:56.425] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":355,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":155,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:19:56.497] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:19:56.498] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[CD] en retract
[CD] en retractFunction
[10:20:11.600] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:20:11.632] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":82,"type":"acknowledge"}}[39m
[10:20:11.507] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":82},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
-----------------------Starting next iteration 26 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:20:12.501] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":153,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:20:12.501] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":153,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m return from getFitFrom: 145[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m return from getSumCashOut: 145[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 355[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:20:12.502] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m return from getFitFrom: 145[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m return from getSumCashOut: 145[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 355[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:20:12.503] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 145[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m return from getSumCashOut: 145[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 155[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:20:12.504] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 145[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m return from getSumCashOut: 145[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 155[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:20:12.505] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:20:12.505] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":83},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:20:12.738] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:20:12.797] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":83,"type":"acknowledge"}}[39m
[10:20:12.501] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":355,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:20:33.508] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":355,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":155,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:20:33.507] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:20:33.507] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:20:33.506] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":154,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:20:33.507] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:20:33.507] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:20:33.507] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:20:33.507] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:20:33.507] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:20:33.507] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:20:33.507] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:20:33.507] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":355,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:20:33.507] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:20:33.632] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":82,"type":"completion"}}[39m
[10:20:33.506] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:20:33.506] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:20:33.507] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":154,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:20:33.507] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":154,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:20:33.576] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:20:33.633] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":354,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:20:38.659] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":354,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":154,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:20:38.771] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:20:38.657] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:20:38.657] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:20:38.772] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:20:38.657] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:20:38.657] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:20:38.657] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:20:38.657] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:20:38.657] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:20:38.657] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:20:38.657] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:20:38.657] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:20:38.657] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":354,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:20:38.658] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:20:38.771] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":83,"type":"completion"}}[39m
[10:20:38.773] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":84},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:20:38.657] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:20:38.657] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:20:38.657] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:20:38.657] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:20:38.657] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":145,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:20:38.717] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:20:38.880] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:20:38.880] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":84,"type":"acknowledge"}}[39m
[10:20:44.342] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:20:44.342] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":354,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:20:44.404] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:20:44.404] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:20:44.404] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:20:44.404] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:20:44.404] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:20:44.404] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:20:44.404] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:20:44.405] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:20:44.405] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":354,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:20:44.405] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 27 -------------------------------
[10:20:44.487] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":84,"type":"completion"}}[39m
[10:20:44.342] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:20:44.342] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:20:44.342] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:20:44.342] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:20:44.403] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:20:44.404] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:20:44.404] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:20:44.404] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:20:44.404] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:20:44.487] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:20:44.488] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:20:44.407] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":354,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":154,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:20:44.488] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:20:44.489] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:20:44.405] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:20:44.405] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[CD] en retract
[CD] en retractFunction
[10:20:59.496] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":85},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:20:59.637] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:20:59.696] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":85,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 27 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:21:00.502] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[10:21:00.502] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":154,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:21:00.503] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":154,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:21:00.503] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:21:00.503] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:21:00.503] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:21:00.503] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:21:00.503] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:21:00.503] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:21:00.503] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 146[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getSumCashOut: 146[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 354[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 146[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:21:00.504] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getSumCashOut: 146[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 354[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 146[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getSumCashOut: 146[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 154[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:21:00.505] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:21:00.506] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:21:00.506] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:21:00.506] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:00.506] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:21:00.506] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:21:00.506] [90mTRACE[39m (Function): [36m return from getFitFrom: 146[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m return from getSumCashOut: 146[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 154[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:21:00.507] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:21:00.507] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":86},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:21:00.625] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:21:00.625] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":86,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":354,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:21:21.562] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":354,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":154,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
función de success
función de final
[10:21:21.562] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:21:21.562] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:21:21.561] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":155,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:21:21.561] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:21:21.561] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:21:21.561] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:21.561] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:21:21.561] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:21.561] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:21:21.561] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:21.561] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":354,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":154,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:21:21.562] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:21:21.684] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":85,"type":"completion"}}[39m
[10:21:21.561] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:21:21.561] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:21:21.561] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":155,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:21:21.561] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":155,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:21:21.621] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:21:21.621] [33mWARN[39m (CashDispenser): [36mwaitCompletionMessage::Cuidado, ha llegado complete tarde.Estamos tratando el complete con requestId: 86 y el lastCompleteRequestId es: 85[39m
[10:21:21.621] [33mWARN[39m (CashDispenser): [36mlastCompletionMsg: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":85,"type":"completion"}}[39m
[10:21:21.684] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":353,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:21:26.676] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":353,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":153,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:21:26.742] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:21:26.675] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:21:26.675] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:21:26.742] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:21:26.674] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:21:26.674] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:21:26.674] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:21:26.674] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:26.674] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:21:26.674] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:26.675] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:21:26.675] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:26.675] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":353,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:21:26.675] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:21:26.741] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":86,"type":"completion"}}[39m
[10:21:26.744] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":87},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:21:26.674] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:21:26.674] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:21:26.674] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:21:26.674] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:21:26.674] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":146,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:21:26.741] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:21:26.799] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:21:26.799] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":87,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":353,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 28 -------------------------------
[10:21:32.270] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:21:32.270] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:21:32.207] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:21:32.207] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:21:32.269] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:21:32.270] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:21:32.270] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:21:32.270] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:32.270] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:21:32.270] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:32.270] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:21:32.270] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:32.270] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":353,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:21:32.270] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:21:32.340] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":87,"type":"completion"}}[39m
[10:21:32.207] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:21:32.207] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:21:32.207] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:21:32.207] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:21:32.269] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:21:32.269] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:21:32.269] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:21:32.270] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:21:32.270] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:21:32.340] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:21:32.340] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:21:32.271] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":353,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":153,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:21:32.341] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:21:32.342] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[CD] en retract
[CD] en retractFunction
[10:21:47.346] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":88},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:21:47.471] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:21:47.472] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":88,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 28 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:21:48.357] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":155,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:21:48.357] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":155,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":155,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:21:48.357] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:21:48.357] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:21:48.358] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:21:48.358] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:21:48.358] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:21:48.358] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:21:48.358] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m return from getFitFrom: 147[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m return from getSumCashOut: 147[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 353[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:21:48.359] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getFitFrom: 147[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getSumCashOut: 147[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 353[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getFitFrom: 147[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getSumCashOut: 147[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 153[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:21:48.360] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:21:48.361] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:21:48.361] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:21:48.361] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m return from getFitFrom: 147[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m return from getSumCashOut: 147[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 153[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:21:48.362] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:21:48.362] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":89},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:21:48.356] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[10:21:48.519] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:21:48.519] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":89,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":353,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:22:09.372] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":353,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":153,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:22:09.370] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":156,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:22:09.370] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:22:09.370] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:22:09.370] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:09.370] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:22:09.370] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:09.370] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:22:09.370] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:09.370] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":353,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":153,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:22:09.371] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:22:09.443] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":88,"type":"completion"}}[39m
[10:22:09.370] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:22:09.370] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:22:09.369] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:22:09.370] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:22:09.370] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":156,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:22:09.370] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":156,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:22:09.442] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:22:09.443] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":352,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:22:14.419] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":352,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":152,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:22:14.483] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:22:14.416] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:22:14.417] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:22:14.417] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:22:14.417] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:14.417] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:22:14.417] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:14.417] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:22:14.417] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:14.418] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":352,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:22:14.418] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:22:14.482] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":89,"type":"completion"}}[39m
[10:22:14.485] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":90},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:22:14.418] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:22:14.418] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:22:14.484] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:22:14.416] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:22:14.416] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:22:14.417] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:22:14.417] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:22:14.417] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":147,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:22:14.482] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:22:14.604] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:22:14.604] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":90,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":352,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:22:20.200] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:22:20.200] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:22:20.263] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:22:20.263] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:22:20.263] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:22:20.263] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:20.263] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:22:20.263] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:20.263] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:22:20.263] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:20.263] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":352,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:22:20.264] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 29 -------------------------------
[10:22:20.325] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":90,"type":"completion"}}[39m
[10:22:20.263] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:22:20.263] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:22:20.200] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:22:20.200] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:22:20.200] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:22:20.200] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:22:20.262] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:22:20.262] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:22:20.263] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:22:20.263] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:22:20.263] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:22:20.325] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:22:20.326] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:22:20.265] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":352,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":152,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:22:20.326] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:22:20.327] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[CD] en retract
[CD] en retractFunction
[10:22:35.332] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":91},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:22:35.416] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:22:35.473] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":91,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 29 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:22:36.333] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[10:22:36.333] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":156,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:22:36.334] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":156,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":156,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:22:36.334] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:22:36.334] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:22:36.334] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:22:36.334] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:22:36.334] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:22:36.334] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:22:36.334] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m return from getFitFrom: 148[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m return from getSumCashOut: 148[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 352[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:22:36.335] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m return from getFitFrom: 148[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m return from getSumCashOut: 148[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 352[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:22:36.336] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m return from getFitFrom: 148[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m return from getSumCashOut: 148[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 152[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:22:36.337] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m return from getFitFrom: 148[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m return from getSumCashOut: 148[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 152[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:22:36.338] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:22:36.338] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":92},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:22:36.429] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:22:36.457] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":92,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":352,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:22:57.129] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:22:57.129] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:22:57.128] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":157,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:22:57.128] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:22:57.128] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:22:57.128] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:57.128] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:22:57.128] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:57.129] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:22:57.129] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:22:57.129] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":352,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":152,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:22:57.129] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:22:57.128] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:22:57.128] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:22:57.128] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":157,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:22:57.128] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":157,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:22:57.195] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
función de success
función de final
[10:22:57.266] [33mWARN[39m (CashDispenser): [36mwaitCompletionMessage::Cuidado, ha llegado complete tarde.Estamos tratando el complete con requestId: 92 y el lastCompleteRequestId es: 91[39m
[10:22:57.266] [33mWARN[39m (CashDispenser): [36mlastCompletionMsg: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":91,"type":"completion"}}[39m
[10:22:57.266] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[10:22:57.266] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":91,"type":"completion"}}[39m
[10:22:57.130] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":352,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":152,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":351,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:23:02.202] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:23:02.202] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:23:02.328] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:23:02.201] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:23:02.201] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:23:02.202] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:23:02.202] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:23:02.202] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:23:02.265] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:23:02.456] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:23:02.456] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":93,"type":"acknowledge"}}[39m
[10:23:02.202] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:23:02.202] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:23:02.202] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:23:02.202] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:02.202] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":148,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:23:02.202] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:02.202] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:23:02.202] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:02.202] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":351,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:23:02.203] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:23:02.327] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":92,"type":"completion"}}[39m
[10:23:02.330] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":93},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:23:02.203] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":351,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":151,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:23:02.327] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":351,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 30 -------------------------------
[10:23:07.984] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:23:07.984] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:23:07.984] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:23:07.984] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:23:08.047] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:23:08.047] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:23:08.047] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:23:08.047] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:23:08.047] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:23:08.118] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:23:08.118] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:23:08.048] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:23:08.048] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:23:07.984] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:23:07.984] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:23:08.047] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:23:08.047] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:23:08.047] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:23:08.047] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:08.047] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:23:08.048] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:08.048] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:23:08.048] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:08.048] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":351,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:23:08.048] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:23:08.118] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":93,"type":"completion"}}[39m
[10:23:08.049] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":351,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":151,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:23:08.119] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:23:08.119] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[CD] en retract
[CD] en retractFunction
[10:23:23.204] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:23:23.268] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":94,"type":"acknowledge"}}[39m
[10:23:23.129] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":94},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
-----------------------Starting next iteration 30 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:23:24.131] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":157,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:23:24.131] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":157,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":157,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:23:24.131] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:23:24.131] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:23:24.131] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:23:24.131] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:23:24.131] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:23:24.131] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:23:24.131] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:24.131] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:23:24.131] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:23:24.131] [90mTRACE[39m (Function): [36m return from getFitFrom: 149[39m
[10:23:24.131] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:23:24.131] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.131] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getSumCashOut: 149[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 351[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getFitFrom: 149[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getSumCashOut: 149[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 351[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:23:24.132] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m return from getFitFrom: 149[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m return from getSumCashOut: 149[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 151[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:23:24.133] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m return from getFitFrom: 149[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m return from getSumCashOut: 149[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 151[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:23:24.134] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:23:24.134] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":95},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:23:24.222] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:23:24.268] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":95,"type":"acknowledge"}}[39m
[10:23:24.130] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":351,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:23:45.125] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:23:45.125] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:23:45.127] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":351,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":151,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:23:45.124] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":158,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:23:45.125] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:23:45.125] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:23:45.125] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:45.125] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:23:45.125] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:45.125] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:23:45.125] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:45.125] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":351,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":151,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:23:45.125] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:23:45.270] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":94,"type":"completion"}}[39m
[10:23:45.124] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:23:45.124] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:23:45.125] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":158,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:23:45.125] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":158,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:23:45.209] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:23:45.270] [33mWARN[39m (CashDispenser): [36mwaitCompletionMessage::Cuidado, ha llegado complete tarde.Estamos tratando el complete con requestId: 95 y el lastCompleteRequestId es: 94[39m
[10:23:45.270] [33mWARN[39m (CashDispenser): [36mlastCompletionMsg: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":94,"type":"completion"}}[39m
[10:23:45.271] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"PrepareDispenseDistribution"}
[CD] unitKey: "unit1". actual denomPresented.values 1
[CD] unitKey: "unit1" -> denom: 50
[CD] unitKey: "unit2". actual denomPresented.values 1
[CD] unitKey: "unit2" -> denom: 20
[10:23:50.088] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:23:50.088] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:23:50.229] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"Present"}[39m
[10:23:50.089] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":350,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":150,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:23:50.228] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"PrepareDispenseDistribution\"}"[39m
[10:23:50.087] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:23:50.087] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:23:50.087] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:23:50.087] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:50.088] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:23:50.088] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:50.088] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:23:50.088] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:50.088] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:23:50.088] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:23:50.227] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}},"completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Dispense","requestId":95,"type":"completion"}}[39m
[10:23:50.230] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Present","type":"command","requestId":96},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:23:50.087] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:23:50.087] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:23:50.087] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:23:50.087] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:23:50.087] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":149,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:23:50.171] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:23:50.353] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:23:50.354] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Present","requestId":96,"type":"acknowledge"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:23:56.035] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:23:56.035] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:23:56.035] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}}[39m
[10:23:56.035] [34mDEBUG[39m (CashDispenser): [36mUnsolicited sin tratar[39m
[10:23:56.098] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:23:56.098] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:23:56.098] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:23:56.098] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:23:56.098] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
[FBST] result de Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}
-----------------------Waiting for next iteration 31 -------------------------------
[10:23:56.164] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:23:56.165] [34mDEBUG[39m (CashDispenser): [36mPresent result: {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[10:23:56.098] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:23:56.098] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:23:56.035] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"position":{"position":"outDefault","additionalBunches":"0"}},"header":{"name":"CashManagement.ItemsPresentedEvent","type":"unsolicited"}})[39m
[10:23:56.035] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:23:56.098] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}},"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:23:56.098] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:23:56.098] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:23:56.098] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:56.098] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:23:56.098] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:56.098] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:23:56.098] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:23:56.098] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:23:56.099] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:23:56.164] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"position":"outDefault","additionalBunches":"0","completionCode":"success","errorDescription":""},"header":{"name":"CashDispenser.Present","requestId":96,"type":"completion"}}[39m
[10:23:56.100] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":350,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":150,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:23:56.165] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"status\":\"ok\",\"type\":\"Present\",\"bills\":[{\"denom\":50,\"numBills\":1},{\"denom\":20,\"numBills\":1}]}"[39m
[10:23:56.167] [34mDEBUG[39m (TEST): [36mRecibido mensaje de éxito del Present {"device":"CASH_DISPENSER","status":"ok","type":"Present","bills":[{"denom":50,"numBills":1},{"denom":20,"numBills":1}]}[39m
[CD] en retract
[CD] en retractFunction
[10:24:11.171] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashManagement.Retract","type":"command","requestId":97},"payload":{"timeout":60000}}, (ack) => this.logger.debug(`ack received ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved ${JSON.stringify(event)}`))[39m
[10:24:11.312] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:24:11.312] [34mDEBUG[39m (CashDispenser): [36mack received {"payload":{"status":"ok"},"header":{"name":"CashManagement.Retract","requestId":97,"type":"acknowledge"}}[39m
-----------------------Starting next iteration 31 -------------------------------
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[CDM] getAvailablesFrom unitinital {"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}
[10:24:12.172] [90mTRACE[39m (Function): [36m buildDenominationFromDispenseDistributionCommand({"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}, {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":158,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:24:12.173] [90mTRACE[39m (Function): [36m getMinimumValues([{"numBills":1,"denom":50},{"numBills":1,"denom":20}], {"unit1":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit2":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit3":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}},"unit4":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":[]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":4,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}},"unit5":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":158,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":158,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}})[39m
[10:24:12.173] [90mTRACE[39m (Function): [36m sortByAvailables(50)[39m
[10:24:12.173] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:24:12.173] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:24:12.173] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:24:12.173] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:24:12.173] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:24:12.173] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m return from getFitFrom: 150[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m return from getSumCashOut: 150[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 350[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR50[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"}, EUR50)[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit1"})[39m
[10:24:12.174] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR50)[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m return from getFitFrom: 150[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR50)[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR50)[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m return from getSumCashOut: 150[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 350[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m sortByAvailables(20)[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m return from sortByAvailables: (unit1, unit2) => {
            let keydenom = CashDispenserMapper.getUniqueKeyDenom(unit1);
            const unit1Available = CashDispenserMapper.getAvailablesFrom(unit1, keydenom);
            keydenom = CashDispenserMapper.getUniqueKeyDenom(unit2);
            const unit2Available = CashDispenserMapper.getAvailablesFrom(unit2, keydenom);
            return unit1Available - unit2Available;
        }[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:24:12.175] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m return from getFitFrom: 150[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m return from getSumCashOut: 150[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 150[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m getUniqueKeyDenom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m return from getUniqueKeyDenom: EUR20[39m
[10:24:12.176] [90mTRACE[39m (Function): [36m getAvailablesFrom({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"}, EUR20)[39m
[10:24:12.177] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"},"unitName":"unit2"})[39m
[10:24:12.177] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:24:12.177] [90mTRACE[39m (Function): [36m getSumCashOut({"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}}, EUR20)[39m
[10:24:12.177] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:24:12.177] [90mTRACE[39m (Function): [36m return from getFitFrom: 150[39m
[10:24:12.177] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:24:12.177] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.199] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:24:12.199] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.199] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:24:12.199] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.199] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}, EUR20)[39m
[10:24:12.199] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.199] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:24:12.199] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.199] [90mTRACE[39m (Function): [36m getFitFrom({"unrecognized":0}, EUR20)[39m
[10:24:12.199] [90mTRACE[39m (Function): [36m return from getFitFrom: 0[39m
[10:24:12.199] [90mTRACE[39m (Function): [36m return from getSumCashOut: 150[39m
[10:24:12.199] [90mTRACE[39m (Function): [36m return from getAvailablesFrom: 150[39m
[10:24:12.199] [90mTRACE[39m (Function): [36m return from getMinimumValues: {"unit1":1,"unit2":1}[39m
[10:24:12.199] [90mTRACE[39m (Function): [36m return from buildDenominationFromDispenseDistributionCommand: {"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}}[39m
[10:24:12.199] [90mTRACE[39m (Device): [36m|------------> send({"header":{"name":"CashDispenser.Dispense","type":"command","requestId":98},"payload":{"timeout":60000,"denomination":{"timeout":30000,"tellerID":0,"denomination":{"currencies":{"EUR":70},"values":{"unit1":1,"unit2":1}}},"token":"NONCE=254611E63B2531576314E86527338D61A"}}, (ack) => this.logger.debug(`ack received SetStorage ${JSON.stringify(ack)}`), (event) => this.logger.debug(`event recieved SetStorage ${JSON.stringify(event)}`))[39m
[10:24:12.316] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: acknowledge[39m
[10:24:12.375] [34mDEBUG[39m (CashDispenser): [36mack received SetStorage {"payload":{"status":"ok"},"header":{"name":"CashDispenser.Dispense","requestId":98,"type":"acknowledge"}}[39m
[10:24:12.171] [34mDEBUG[39m (MdcsIotDevices): [36mconfigureWebsocket[/mdcs4iot/devices/v1.0/CASH]::Client of MdcsIotDevices received: {"device":"CASH_DISPENSER","type":"PrepareDispenseDistribution","amount":70,"distributions":[{"numBills":1,"denom":50},{"numBills":1,"denom":20}],"currency":"EUR"}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
función de success
función de final
[10:24:33.152] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:24:33.152] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:24:33.153] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":350,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":150,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:24:33.151] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":159,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:24:33.151] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:24:33.152] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:24:33.152] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:24:33.152] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:24:33.152] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:24:33.152] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:24:33.152] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:24:33.152] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:24:33.152] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:24:33.214] [90mTRACE[39m (Device): [36m<------------| return from send: {"payload":{"storage":{"unit5":{"retractOperations":1,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":1,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}}},"completionCode":"success","errorDescription":""},"header":{"name":"CashManagement.Retract","requestId":97,"type":"completion"}}[39m
[10:24:33.151] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:24:33.151] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:24:33.151] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"ok","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":159,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:24:33.151] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":159,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[10:24:33.214] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:24:33.214] [34mDEBUG[39m (CashDispenser): [36mRetract result: {"device":"CASH_DISPENSER","status":"ok","type":"Retract"}[39m
[FBST] result: {"type":"CommandError","device":"CASH_DISPENSER","originalCommand":"PrepareDispenseDistribution","error":"Error tratando comando prepareDispenseDistribution: Error: Completion timeout: 60000"}
[10:25:12.425] [31mERROR[39m (CashDispenser): [36mError tratando comando prepareDispenseDistribution: Error: Completion timeout: 60000[39m
[10:25:12.425] [31mERROR[39m (MdcsIotUtils): [36mDetectada respuesta invalida, json no parseable: Error tratando comando prepareDispenseDistribution: Error: Completion timeout: 60000[39m
[10:25:12.426] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"type\":\"CommandError\",\"device\":\"CASH_DISPENSER\",\"originalCommand\":\"PrepareDispenseDistribution\",\"error\":\"Error tratando comando prepareDispenseDistribution: Error: Completion timeout: 60000\"}"[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"inoperative","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:25:17.867] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:25:17.867] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"inoperative","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:25:18.023] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:25:18.023] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"inoperative","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[10:25:18.077] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[10:25:18.077] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[10:25:17.868] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":350,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"inoperative\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":150,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:25:18.025] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":350,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"inoperative\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":150,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:25:18.079] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":350,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"inoperative\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":150,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[10:25:17.866] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"inoperative","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:25:17.867] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:25:17.867] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:25:17.867] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:25:17.867] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:25:17.867] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:25:17.867] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:25:17.867] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:25:17.867] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"inoperative","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:25:17.868] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:25:18.022] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"inoperative","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:25:18.023] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:25:18.023] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:25:18.023] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:25:18.023] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:25:18.023] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:25:18.023] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:25:18.023] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:25:18.023] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"inoperative","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:25:18.023] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:25:18.077] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"inoperative","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[10:25:18.077] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[10:25:18.077] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:25:18.077] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:25:18.077] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:25:18.077] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:25:18.077] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[10:25:18.077] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[10:25:18.077] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"inoperative","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[10:25:18.078] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[10:25:17.866] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:25:17.866] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:25:17.867] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"inoperative","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:25:17.867] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:25:17.932] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: completion[39m
[10:25:18.022] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:25:18.022] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:25:18.022] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"inoperative","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:25:18.022] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[10:25:18.076] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[10:25:18.077] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[10:25:18.077] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit2":{"id":"D0002","positionName":"CASSETTE2","capacity":2000,"status":"inoperative","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[10:25:18.077] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit2]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"inoperative","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[11:00:08.356] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"missing","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":159,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[11:00:08.356] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[11:00:08.356] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[11:00:08.356] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[11:00:08.356] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[11:00:08.356] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[11:00:08.356] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[11:00:08.356] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[11:00:08.357] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"inoperative","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[11:00:08.357] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[11:00:08.356] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[11:00:08.356] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[11:00:08.356] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"missing","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":159,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[11:00:08.356] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":159,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"inoperative","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[11:00:08.416] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[11:00:08.416] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[11:00:08.417] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"missing","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":159,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[11:00:08.417] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit5]: {"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":159,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}[39m
[11:00:08.417] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit5":{"id":"D0005","positionName":"CASSETTER","capacity":2000,"status":"missing","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":false,"replenishment":false,"cashInRetract":false,"cashOutRetract":true,"reject":true},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"","value":0,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":[]},"status":{"index":5,"initial":{"unrecognized":0},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":159,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0,"EUR50":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"EUR20":{"fit":159,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"empty"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[11:00:08.417] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[11:00:08.417] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[11:00:08.417] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[11:00:08.417] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[11:00:08.417] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[11:00:08.417] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[11:00:08.417] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[11:00:08.417] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"ok","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"inoperative","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[11:00:08.417] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[11:00:08.357] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[11:00:08.357] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[11:00:08.417] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[11:00:08.417] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[11:00:08.358] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":350,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"inoperative\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":150,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[11:00:08.418] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"ok\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":350,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"inoperative\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":150,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"inoperative","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[FBST] result: {"device":"CASH_DISPENSER","type":"BoxesInfo","boxes":[{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"inoperative","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"cashOut","denominations":[]}]}
[11:01:28.682] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[11:01:28.682] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[11:01:28.742] [34mDEBUG[39m (MdcsIotDevices): [36mSe busca el device con nombre: CASH[39m
[11:01:28.742] [32mINFO[39m (MdcsIotDevices): [36mSe intenta progagar unsolicited desde Fujitsu - CashDispenserXFS3 hacia los 1 conectados.[39m
[11:01:28.684] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":350,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"inoperative\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":150,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[11:01:28.743] [34mDEBUG[39m (TEST): [36mRecibido mensaje del cash-dispenser: "{\"device\":\"CASH_DISPENSER\",\"type\":\"BoxesInfo\",\"boxes\":[{\"id\":\"unit1\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR50\",\"denom\":50,\"currency\":\"EUR\",\"initialBills\":{\"fit\":500,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":350,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit2\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"inoperative\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR20\",\"denom\":20,\"currency\":\"EUR\",\"initialBills\":{\"fit\":300,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":150,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit3\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[{\"name\":\"EUR10\",\"denom\":10,\"currency\":\"EUR\",\"initialBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0},\"currentBills\":{\"fit\":400,\"unfit\":0,\"suspect\":0,\"counterfeit\":0,\"inked\":0}}]},{\"id\":\"unit4\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":false,\"boxType\":\"out\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"none\",\"denominations\":[]},{\"id\":\"unit5\",\"highThreshold\":1000,\"lowThreshold\":0,\"allowReject\":true,\"boxType\":\"none\",\"capacity\":2000,\"status\":\"missing\",\"serialNumber\":\"sn000\",\"retractType\":\"cashOut\",\"denominations\":[]}]}"[39m
[11:01:28.680] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[11:01:28.680] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[11:01:28.681] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"missing","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[11:01:28.682] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[11:01:28.741] [34mDEBUG[39m (CashDispenser): [36mSe solicita un manageMessage a la clase que hereda: event[39m
[11:01:28.741] [33mWARN[39m (CashDispenser): [36mcheckQueues::Cuidado, ha llegado evento sin requestId o requestId = 0. Por compatibilidad, se transforma en un evento tipo unsolicited y se tratara como tal, haciendo un broadcast[39m
[11:01:28.742] [34mDEBUG[39m (CashDispenser): [36mLlega unsolicited[CASH]: {"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"missing","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}}[39m
[11:01:28.742] [34mDEBUG[39m (CashDispenser): [36mSe encuentra cash en [unit1]: {"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}[39m
[11:01:28.681] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"missing","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[11:01:28.682] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[11:01:28.682] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[11:01:28.682] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[11:01:28.682] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[11:01:28.682] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[11:01:28.682] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[11:01:28.682] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[11:01:28.682] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"inoperative","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[11:01:28.683] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
[11:01:28.741] [90mTRACE[39m (CashDispenser): [36m manageUnsolicited({"payload":{"unit1":{"id":"D0001","positionName":"CASSETTE1","capacity":2000,"status":"missing","serialNumber":"sn000","cash":{"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}}}},"header":{"name":"Storage.StorageChangedEvent","type":"unsolicited"}})[39m
[11:01:28.742] [90mTRACE[39m (CashDispenser): [36mgetBoxes getBoxes()[39m
[11:01:28.742] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":50,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR50"]},"status":{"index":1,"initial":{"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR50":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR50":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[11:01:28.742] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR50":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[11:01:28.742] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR5","EUR10","EUR20","EUR50","EUR100","EUR200"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":20,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR20"]},"status":{"index":2,"initial":{"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0,"EUR20":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0,"EUR20":{"fit":0,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[11:01:28.742] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR20":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[11:01:28.742] [90mTRACE[39m (Function): [36m getStatusInitial({"capabilities":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"hardwareSensors":true,"retractAreas":1,"retractThresholds":false,"cashItems":["EUR10"]},"configuration":{"types":{"cashIn":false,"cashOut":true,"replenishment":false,"cashInRetract":false,"cashOutRetract":false,"reject":false},"items":{"fit":true,"unfit":false,"unrecognized":false,"counterfeit":false,"suspect":false,"inked":false,"coupon":false,"document":false},"currency":"EUR","value":10,"highThreshold":1000,"lowThreshold":0,"appLockIn":false,"appLockOut":false,"cashItems":["EUR10"]},"status":{"index":3,"initial":{"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}},"out":{"presented":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"unknown":{"unrecognized":0},"stacked":{"unrecognized":0},"diverted":{"unrecognized":0},"transport":{"unrecognized":0}},"in":{"retractOperations":0,"deposited":{"unrecognized":0},"retracted":{"unrecognized":0},"rejected":{"unrecognized":0},"distributed":{"unrecognized":0},"transport":{"unrecognized":0}},"accuracy":"notSupported","replenishmentStatus":"ok"}})[39m
[11:01:28.742] [90mTRACE[39m (Function): [36m return from getStatusInitial: {"unrecognized":0,"EUR10":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}[39m
[11:01:28.742] [90mTRACE[39m (CashDispenser): [36mgetBoxes return from getBoxes: [{"id":"unit1","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR50","denom":50,"currency":"EUR","initialBills":{"fit":500,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":350,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit2","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"inoperative","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR20","denom":20,"currency":"EUR","initialBills":{"fit":300,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":150,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit3","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[{"name":"EUR10","denom":10,"currency":"EUR","initialBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0},"currentBills":{"fit":400,"unfit":0,"suspect":0,"counterfeit":0,"inked":0}}]},{"id":"unit4","highThreshold":1000,"lowThreshold":0,"allowReject":false,"boxType":"out","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"none","denominations":[]},{"id":"unit5","highThreshold":1000,"lowThreshold":0,"allowReject":true,"boxType":"none","capacity":2000,"status":"missing","serialNumber":"sn000","retractType":"cashOut","denominations":[]}][39m
[11:01:28.742] [90mTRACE[39m (CashDispenser): [36m return from manageUnsolicited: undefined[39m
